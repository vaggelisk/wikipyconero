{"remainingRequest":"/home/kantro/WebstormProjects/wikipyconero/node_modules/babel-loader/lib/index.js??ref--0-1!/home/kantro/WebstormProjects/wikipyconero/client/libs/codemirror-merge/diff-match-patch.js","dependencies":[{"path":"/home/kantro/WebstormProjects/wikipyconero/client/libs/codemirror-merge/diff-match-patch.js","mtime":1695287603871},{"path":"/home/kantro/WebstormProjects/wikipyconero/.babelrc","mtime":1695287603859},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/cache-loader/dist/cjs.js","mtime":1694896091905},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/babel-loader/lib/index.js","mtime":1694896091857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIGRpZmZfbWF0Y2hfcGF0Y2ggPSBmdW5jdGlvbiAoKSB7CiAgICB0aGlzLkRpZmZfVGltZW91dCA9IDE7CiAgICB0aGlzLkRpZmZfRWRpdENvc3QgPSA0OwogICAgdGhpcy5NYXRjaF9UaHJlc2hvbGQgPSAuNTsKICAgIHRoaXMuTWF0Y2hfRGlzdGFuY2UgPSAxRTM7CiAgICB0aGlzLlBhdGNoX0RlbGV0ZVRocmVzaG9sZCA9IC41OwogICAgdGhpcy5QYXRjaF9NYXJnaW4gPSA0OwogICAgdGhpcy5NYXRjaF9NYXhCaXRzID0gMzI7CiAgfSwKICBESUZGX0RFTEVURSA9IC0xLAogIERJRkZfSU5TRVJUID0gMSwKICBESUZGX0VRVUFMID0gMDsKZGlmZl9tYXRjaF9wYXRjaC5EaWZmID0gZnVuY3Rpb24gKGEsIGIpIHsKICB0aGlzWzBdID0gYTsKICB0aGlzWzFdID0gYjsKfTsKZGlmZl9tYXRjaF9wYXRjaC5EaWZmLnByb3RvdHlwZS5sZW5ndGggPSAyOwpkaWZmX21hdGNoX3BhdGNoLkRpZmYucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogIHJldHVybiB0aGlzWzBdICsgIiwiICsgdGhpc1sxXTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9tYWluID0gZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHsKICAidW5kZWZpbmVkIiA9PSB0eXBlb2YgZCAmJiAoZCA9IDAgPj0gdGhpcy5EaWZmX1RpbWVvdXQgPyBOdW1iZXIuTUFYX1ZBTFVFIDogbmV3IERhdGUoKS5nZXRUaW1lKCkgKyAxRTMgKiB0aGlzLkRpZmZfVGltZW91dCk7CiAgaWYgKG51bGwgPT0gYSB8fCBudWxsID09IGIpIHRocm93IEVycm9yKCJOdWxsIGlucHV0LiAoZGlmZl9tYWluKSIpOwogIGlmIChhID09IGIpIHJldHVybiBhID8gW25ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9FUVVBTCwgYSldIDogW107CiAgInVuZGVmaW5lZCIgPT0gdHlwZW9mIGMgJiYgKGMgPSAhMCk7CiAgdmFyIGUgPSBjLAogICAgZiA9IHRoaXMuZGlmZl9jb21tb25QcmVmaXgoYSwgYik7CiAgYyA9IGEuc3Vic3RyaW5nKDAsIGYpOwogIGEgPSBhLnN1YnN0cmluZyhmKTsKICBiID0gYi5zdWJzdHJpbmcoZik7CiAgZiA9IHRoaXMuZGlmZl9jb21tb25TdWZmaXgoYSwgYik7CiAgdmFyIGcgPSBhLnN1YnN0cmluZyhhLmxlbmd0aCAtIGYpOwogIGEgPSBhLnN1YnN0cmluZygwLCBhLmxlbmd0aCAtIGYpOwogIGIgPSBiLnN1YnN0cmluZygwLCBiLmxlbmd0aCAtIGYpOwogIGEgPSB0aGlzLmRpZmZfY29tcHV0ZV8oYSwgYiwgZSwgZCk7CiAgYyAmJiBhLnVuc2hpZnQobmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBjKSk7CiAgZyAmJiBhLnB1c2gobmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBnKSk7CiAgdGhpcy5kaWZmX2NsZWFudXBNZXJnZShhKTsKICByZXR1cm4gYTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jb21wdXRlXyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkKSB7CiAgaWYgKCFhKSByZXR1cm4gW25ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9JTlNFUlQsIGIpXTsKICBpZiAoIWIpIHJldHVybiBbbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0RFTEVURSwgYSldOwogIHZhciBlID0gYS5sZW5ndGggPiBiLmxlbmd0aCA/IGEgOiBiLAogICAgZiA9IGEubGVuZ3RoID4gYi5sZW5ndGggPyBiIDogYSwKICAgIGcgPSBlLmluZGV4T2YoZik7CiAgcmV0dXJuIC0xICE9IGcgPyAoYyA9IFtuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfSU5TRVJULCBlLnN1YnN0cmluZygwLCBnKSksIG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9FUVVBTCwgZiksIG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9JTlNFUlQsIGUuc3Vic3RyaW5nKGcgKyBmLmxlbmd0aCkpXSwgYS5sZW5ndGggPiBiLmxlbmd0aCAmJiAoY1swXVswXSA9IGNbMl1bMF0gPSBESUZGX0RFTEVURSksIGMpIDogMSA9PSBmLmxlbmd0aCA/IFtuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfREVMRVRFLCBhKSwgbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0lOU0VSVCwgYildIDogKGUgPSB0aGlzLmRpZmZfaGFsZk1hdGNoXyhhLCBiKSkgPyAoYiA9IGVbMV0sIGYgPSBlWzNdLCBhID0gZVs0XSwgZSA9IHRoaXMuZGlmZl9tYWluKGVbMF0sIGVbMl0sIGMsIGQpLCBjID0gdGhpcy5kaWZmX21haW4oYiwgZiwgYywgZCksIGUuY29uY2F0KFtuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfRVFVQUwsIGEpXSwgYykpIDogYyAmJiAxMDAgPCBhLmxlbmd0aCAmJiAxMDAgPCBiLmxlbmd0aCA/IHRoaXMuZGlmZl9saW5lTW9kZV8oYSwgYiwgZCkgOiB0aGlzLmRpZmZfYmlzZWN0XyhhLCBiLCBkKTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9saW5lTW9kZV8gPSBmdW5jdGlvbiAoYSwgYiwgYykgewogIHZhciBkID0gdGhpcy5kaWZmX2xpbmVzVG9DaGFyc18oYSwgYik7CiAgYSA9IGQuY2hhcnMxOwogIGIgPSBkLmNoYXJzMjsKICBkID0gZC5saW5lQXJyYXk7CiAgYSA9IHRoaXMuZGlmZl9tYWluKGEsIGIsICExLCBjKTsKICB0aGlzLmRpZmZfY2hhcnNUb0xpbmVzXyhhLCBkKTsKICB0aGlzLmRpZmZfY2xlYW51cFNlbWFudGljKGEpOwogIGEucHVzaChuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfRVFVQUwsICIiKSk7CiAgZm9yICh2YXIgZSA9IGQgPSBiID0gMCwgZiA9ICIiLCBnID0gIiI7IGIgPCBhLmxlbmd0aDspIHsKICAgIHN3aXRjaCAoYVtiXVswXSkgewogICAgICBjYXNlIERJRkZfSU5TRVJUOgogICAgICAgIGUrKzsKICAgICAgICBnICs9IGFbYl1bMV07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgRElGRl9ERUxFVEU6CiAgICAgICAgZCsrOwogICAgICAgIGYgKz0gYVtiXVsxXTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBESUZGX0VRVUFMOgogICAgICAgIGlmICgxIDw9IGQgJiYgMSA8PSBlKSB7CiAgICAgICAgICBhLnNwbGljZShiIC0gZCAtIGUsIGQgKyBlKTsKICAgICAgICAgIGIgPSBiIC0gZCAtIGU7CiAgICAgICAgICBkID0gdGhpcy5kaWZmX21haW4oZiwgZywgITEsIGMpOwogICAgICAgICAgZm9yIChlID0gZC5sZW5ndGggLSAxOyAwIDw9IGU7IGUtLSkgYS5zcGxpY2UoYiwgMCwgZFtlXSk7CiAgICAgICAgICBiICs9IGQubGVuZ3RoOwogICAgICAgIH0KICAgICAgICBkID0gZSA9IDA7CiAgICAgICAgZyA9IGYgPSAiIjsKICAgIH0KICAgIGIrKzsKICB9CiAgYS5wb3AoKTsKICByZXR1cm4gYTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9iaXNlY3RfID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICBmb3IgKHZhciBkID0gYS5sZW5ndGgsIGUgPSBiLmxlbmd0aCwgZiA9IE1hdGguY2VpbCgoZCArIGUpIC8gMiksIGcgPSAyICogZiwgaCA9IEFycmF5KGcpLCBsID0gQXJyYXkoZyksIGsgPSAwOyBrIDwgZzsgaysrKSBoW2tdID0gLTEsIGxba10gPSAtMTsKICBoW2YgKyAxXSA9IDA7CiAgbFtmICsgMV0gPSAwOwogIGsgPSBkIC0gZTsKICBmb3IgKHZhciBtID0gMCAhPSBrICUgMiwgcCA9IDAsIHggPSAwLCB3ID0gMCwgcSA9IDAsIHQgPSAwOyB0IDwgZiAmJiAhKG5ldyBEYXRlKCkuZ2V0VGltZSgpID4gYyk7IHQrKykgewogICAgZm9yICh2YXIgdiA9IC10ICsgcDsgdiA8PSB0IC0geDsgdiArPSAyKSB7CiAgICAgIHZhciBuID0gZiArIHY7CiAgICAgIHZhciByID0gdiA9PSAtdCB8fCB2ICE9IHQgJiYgaFtuIC0gMV0gPCBoW24gKyAxXSA/IGhbbiArIDFdIDogaFtuIC0gMV0gKyAxOwogICAgICBmb3IgKHZhciB5ID0gciAtIHY7IHIgPCBkICYmIHkgPCBlICYmIGEuY2hhckF0KHIpID09IGIuY2hhckF0KHkpOykgcisrLCB5Kys7CiAgICAgIGhbbl0gPSByOwogICAgICBpZiAociA+IGQpIHggKz0gMjtlbHNlIGlmICh5ID4gZSkgcCArPSAyO2Vsc2UgaWYgKG0gJiYgKG4gPSBmICsgayAtIHYsIDAgPD0gbiAmJiBuIDwgZyAmJiAtMSAhPSBsW25dKSkgewogICAgICAgIHZhciB1ID0gZCAtIGxbbl07CiAgICAgICAgaWYgKHIgPj0gdSkgcmV0dXJuIHRoaXMuZGlmZl9iaXNlY3RTcGxpdF8oYSwgYiwgciwgeSwgYyk7CiAgICAgIH0KICAgIH0KICAgIGZvciAodiA9IC10ICsgdzsgdiA8PSB0IC0gcTsgdiArPSAyKSB7CiAgICAgIG4gPSBmICsgdjsKICAgICAgdSA9IHYgPT0gLXQgfHwgdiAhPSB0ICYmIGxbbiAtIDFdIDwgbFtuICsgMV0gPyBsW24gKyAxXSA6IGxbbiAtIDFdICsgMTsKICAgICAgZm9yIChyID0gdSAtIHY7IHUgPCBkICYmIHIgPCBlICYmIGEuY2hhckF0KGQgLSB1IC0gMSkgPT0gYi5jaGFyQXQoZSAtIHIgLSAxKTspIHUrKywgcisrOwogICAgICBsW25dID0gdTsKICAgICAgaWYgKHUgPiBkKSBxICs9IDI7ZWxzZSBpZiAociA+IGUpIHcgKz0gMjtlbHNlIGlmICghbSAmJiAobiA9IGYgKyBrIC0gdiwgMCA8PSBuICYmIG4gPCBnICYmIC0xICE9IGhbbl0gJiYgKHIgPSBoW25dLCB5ID0gZiArIHIgLSBuLCB1ID0gZCAtIHUsIHIgPj0gdSkpKSByZXR1cm4gdGhpcy5kaWZmX2Jpc2VjdFNwbGl0XyhhLCBiLCByLCB5LCBjKTsKICAgIH0KICB9CiAgcmV0dXJuIFtuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfREVMRVRFLCBhKSwgbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0lOU0VSVCwgYildOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5kaWZmX2Jpc2VjdFNwbGl0XyA9IGZ1bmN0aW9uIChhLCBiLCBjLCBkLCBlKSB7CiAgdmFyIGYgPSBhLnN1YnN0cmluZygwLCBjKSwKICAgIGcgPSBiLnN1YnN0cmluZygwLCBkKTsKICBhID0gYS5zdWJzdHJpbmcoYyk7CiAgYiA9IGIuc3Vic3RyaW5nKGQpOwogIGYgPSB0aGlzLmRpZmZfbWFpbihmLCBnLCAhMSwgZSk7CiAgZSA9IHRoaXMuZGlmZl9tYWluKGEsIGIsICExLCBlKTsKICByZXR1cm4gZi5jb25jYXQoZSk7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLmRpZmZfbGluZXNUb0NoYXJzXyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgZnVuY3Rpb24gYyhhKSB7CiAgICBmb3IgKHZhciBiID0gIiIsIGMgPSAwLCBnID0gLTEsIGggPSBkLmxlbmd0aDsgZyA8IGEubGVuZ3RoIC0gMTspIHsKICAgICAgZyA9IGEuaW5kZXhPZigiXG4iLCBjKTsKICAgICAgLTEgPT0gZyAmJiAoZyA9IGEubGVuZ3RoIC0gMSk7CiAgICAgIHZhciBsID0gYS5zdWJzdHJpbmcoYywgZyArIDEpOwogICAgICAoZS5oYXNPd25Qcm9wZXJ0eSA/IGUuaGFzT3duUHJvcGVydHkobCkgOiB2b2lkIDAgIT09IGVbbF0pID8gYiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVbbF0pIDogKGggPT0gZiAmJiAobCA9IGEuc3Vic3RyaW5nKGMpLCBnID0gYS5sZW5ndGgpLCBiICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoaCksIGVbbF0gPSBoLCBkW2grK10gPSBsKTsKICAgICAgYyA9IGcgKyAxOwogICAgfQogICAgcmV0dXJuIGI7CiAgfQogIHZhciBkID0gW10sCiAgICBlID0ge307CiAgZFswXSA9ICIiOwogIHZhciBmID0gNEU0LAogICAgZyA9IGMoYSk7CiAgZiA9IDY1NTM1OwogIHZhciBoID0gYyhiKTsKICByZXR1cm4gewogICAgY2hhcnMxOiBnLAogICAgY2hhcnMyOiBoLAogICAgbGluZUFycmF5OiBkCiAgfTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jaGFyc1RvTGluZXNfID0gZnVuY3Rpb24gKGEsIGIpIHsKICBmb3IgKHZhciBjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIHsKICAgIGZvciAodmFyIGQgPSBhW2NdWzFdLCBlID0gW10sIGYgPSAwOyBmIDwgZC5sZW5ndGg7IGYrKykgZVtmXSA9IGJbZC5jaGFyQ29kZUF0KGYpXTsKICAgIGFbY11bMV0gPSBlLmpvaW4oIiIpOwogIH0KfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jb21tb25QcmVmaXggPSBmdW5jdGlvbiAoYSwgYikgewogIGlmICghYSB8fCAhYiB8fCBhLmNoYXJBdCgwKSAhPSBiLmNoYXJBdCgwKSkgcmV0dXJuIDA7CiAgZm9yICh2YXIgYyA9IDAsIGQgPSBNYXRoLm1pbihhLmxlbmd0aCwgYi5sZW5ndGgpLCBlID0gZCwgZiA9IDA7IGMgPCBlOykgYS5zdWJzdHJpbmcoZiwgZSkgPT0gYi5zdWJzdHJpbmcoZiwgZSkgPyBmID0gYyA9IGUgOiBkID0gZSwgZSA9IE1hdGguZmxvb3IoKGQgLSBjKSAvIDIgKyBjKTsKICByZXR1cm4gZTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jb21tb25TdWZmaXggPSBmdW5jdGlvbiAoYSwgYikgewogIGlmICghYSB8fCAhYiB8fCBhLmNoYXJBdChhLmxlbmd0aCAtIDEpICE9IGIuY2hhckF0KGIubGVuZ3RoIC0gMSkpIHJldHVybiAwOwogIGZvciAodmFyIGMgPSAwLCBkID0gTWF0aC5taW4oYS5sZW5ndGgsIGIubGVuZ3RoKSwgZSA9IGQsIGYgPSAwOyBjIDwgZTspIGEuc3Vic3RyaW5nKGEubGVuZ3RoIC0gZSwgYS5sZW5ndGggLSBmKSA9PSBiLnN1YnN0cmluZyhiLmxlbmd0aCAtIGUsIGIubGVuZ3RoIC0gZikgPyBmID0gYyA9IGUgOiBkID0gZSwgZSA9IE1hdGguZmxvb3IoKGQgLSBjKSAvIDIgKyBjKTsKICByZXR1cm4gZTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jb21tb25PdmVybGFwXyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgdmFyIGMgPSBhLmxlbmd0aCwKICAgIGQgPSBiLmxlbmd0aDsKICBpZiAoMCA9PSBjIHx8IDAgPT0gZCkgcmV0dXJuIDA7CiAgYyA+IGQgPyBhID0gYS5zdWJzdHJpbmcoYyAtIGQpIDogYyA8IGQgJiYgKGIgPSBiLnN1YnN0cmluZygwLCBjKSk7CiAgYyA9IE1hdGgubWluKGMsIGQpOwogIGlmIChhID09IGIpIHJldHVybiBjOwogIGQgPSAwOwogIGZvciAodmFyIGUgPSAxOzspIHsKICAgIHZhciBmID0gYS5zdWJzdHJpbmcoYyAtIGUpOwogICAgZiA9IGIuaW5kZXhPZihmKTsKICAgIGlmICgtMSA9PSBmKSByZXR1cm4gZDsKICAgIGUgKz0gZjsKICAgIGlmICgwID09IGYgfHwgYS5zdWJzdHJpbmcoYyAtIGUpID09IGIuc3Vic3RyaW5nKDAsIGUpKSBkID0gZSwgZSsrOwogIH0KfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9oYWxmTWF0Y2hfID0gZnVuY3Rpb24gKGEsIGIpIHsKICBmdW5jdGlvbiBjKGEsIGIsIGMpIHsKICAgIGZvciAodmFyIGQgPSBhLnN1YnN0cmluZyhjLCBjICsgTWF0aC5mbG9vcihhLmxlbmd0aCAvIDQpKSwgZSA9IC0xLCBnID0gIiIsIGgsIGssIGwsIG07IC0xICE9IChlID0gYi5pbmRleE9mKGQsIGUgKyAxKSk7KSB7CiAgICAgIHZhciBwID0gZi5kaWZmX2NvbW1vblByZWZpeChhLnN1YnN0cmluZyhjKSwgYi5zdWJzdHJpbmcoZSkpLAogICAgICAgIHUgPSBmLmRpZmZfY29tbW9uU3VmZml4KGEuc3Vic3RyaW5nKDAsIGMpLCBiLnN1YnN0cmluZygwLCBlKSk7CiAgICAgIGcubGVuZ3RoIDwgdSArIHAgJiYgKGcgPSBiLnN1YnN0cmluZyhlIC0gdSwgZSkgKyBiLnN1YnN0cmluZyhlLCBlICsgcCksIGggPSBhLnN1YnN0cmluZygwLCBjIC0gdSksIGsgPSBhLnN1YnN0cmluZyhjICsgcCksIGwgPSBiLnN1YnN0cmluZygwLCBlIC0gdSksIG0gPSBiLnN1YnN0cmluZyhlICsgcCkpOwogICAgfQogICAgcmV0dXJuIDIgKiBnLmxlbmd0aCA+PSBhLmxlbmd0aCA/IFtoLCBrLCBsLCBtLCBnXSA6IG51bGw7CiAgfQogIGlmICgwID49IHRoaXMuRGlmZl9UaW1lb3V0KSByZXR1cm4gbnVsbDsKICB2YXIgZCA9IGEubGVuZ3RoID4gYi5sZW5ndGggPyBhIDogYiwKICAgIGUgPSBhLmxlbmd0aCA+IGIubGVuZ3RoID8gYiA6IGE7CiAgaWYgKDQgPiBkLmxlbmd0aCB8fCAyICogZS5sZW5ndGggPCBkLmxlbmd0aCkgcmV0dXJuIG51bGw7CiAgdmFyIGYgPSB0aGlzLAogICAgZyA9IGMoZCwgZSwgTWF0aC5jZWlsKGQubGVuZ3RoIC8gNCkpOwogIGQgPSBjKGQsIGUsIE1hdGguY2VpbChkLmxlbmd0aCAvIDIpKTsKICBpZiAoZyB8fCBkKSBnID0gZCA/IGcgPyBnWzRdLmxlbmd0aCA+IGRbNF0ubGVuZ3RoID8gZyA6IGQgOiBkIDogZztlbHNlIHJldHVybiBudWxsOwogIGlmIChhLmxlbmd0aCA+IGIubGVuZ3RoKSB7CiAgICBkID0gZ1swXTsKICAgIGUgPSBnWzFdOwogICAgdmFyIGggPSBnWzJdOwogICAgdmFyIGwgPSBnWzNdOwogIH0gZWxzZSBoID0gZ1swXSwgbCA9IGdbMV0sIGQgPSBnWzJdLCBlID0gZ1szXTsKICByZXR1cm4gW2QsIGUsIGgsIGwsIGdbNF1dOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5kaWZmX2NsZWFudXBTZW1hbnRpYyA9IGZ1bmN0aW9uIChhKSB7CiAgZm9yICh2YXIgYiA9ICExLCBjID0gW10sIGQgPSAwLCBlID0gbnVsbCwgZiA9IDAsIGcgPSAwLCBoID0gMCwgbCA9IDAsIGsgPSAwOyBmIDwgYS5sZW5ndGg7KSBhW2ZdWzBdID09IERJRkZfRVFVQUwgPyAoY1tkKytdID0gZiwgZyA9IGwsIGggPSBrLCBrID0gbCA9IDAsIGUgPSBhW2ZdWzFdKSA6IChhW2ZdWzBdID09IERJRkZfSU5TRVJUID8gbCArPSBhW2ZdWzFdLmxlbmd0aCA6IGsgKz0gYVtmXVsxXS5sZW5ndGgsIGUgJiYgZS5sZW5ndGggPD0gTWF0aC5tYXgoZywgaCkgJiYgZS5sZW5ndGggPD0gTWF0aC5tYXgobCwgaykgJiYgKGEuc3BsaWNlKGNbZCAtIDFdLCAwLCBuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfREVMRVRFLCBlKSksIGFbY1tkIC0gMV0gKyAxXVswXSA9IERJRkZfSU5TRVJULCBkLS0sIGQtLSwgZiA9IDAgPCBkID8gY1tkIC0gMV0gOiAtMSwgayA9IGwgPSBoID0gZyA9IDAsIGUgPSBudWxsLCBiID0gITApKSwgZisrOwogIGIgJiYgdGhpcy5kaWZmX2NsZWFudXBNZXJnZShhKTsKICB0aGlzLmRpZmZfY2xlYW51cFNlbWFudGljTG9zc2xlc3MoYSk7CiAgZm9yIChmID0gMTsgZiA8IGEubGVuZ3RoOykgewogICAgaWYgKGFbZiAtIDFdWzBdID09IERJRkZfREVMRVRFICYmIGFbZl1bMF0gPT0gRElGRl9JTlNFUlQpIHsKICAgICAgYiA9IGFbZiAtIDFdWzFdOwogICAgICBjID0gYVtmXVsxXTsKICAgICAgZCA9IHRoaXMuZGlmZl9jb21tb25PdmVybGFwXyhiLCBjKTsKICAgICAgZSA9IHRoaXMuZGlmZl9jb21tb25PdmVybGFwXyhjLCBiKTsKICAgICAgaWYgKGQgPj0gZSkgewogICAgICAgIGlmIChkID49IGIubGVuZ3RoIC8gMiB8fCBkID49IGMubGVuZ3RoIC8gMikgYS5zcGxpY2UoZiwgMCwgbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBjLnN1YnN0cmluZygwLCBkKSkpLCBhW2YgLSAxXVsxXSA9IGIuc3Vic3RyaW5nKDAsIGIubGVuZ3RoIC0gZCksIGFbZiArIDFdWzFdID0gYy5zdWJzdHJpbmcoZCksIGYrKzsKICAgICAgfSBlbHNlIGlmIChlID49IGIubGVuZ3RoIC8gMiB8fCBlID49IGMubGVuZ3RoIC8gMikgYS5zcGxpY2UoZiwgMCwgbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBiLnN1YnN0cmluZygwLCBlKSkpLCBhW2YgLSAxXVswXSA9IERJRkZfSU5TRVJULCBhW2YgLSAxXVsxXSA9IGMuc3Vic3RyaW5nKDAsIGMubGVuZ3RoIC0gZSksIGFbZiArIDFdWzBdID0gRElGRl9ERUxFVEUsIGFbZiArIDFdWzFdID0gYi5zdWJzdHJpbmcoZSksIGYrKzsKICAgICAgZisrOwogICAgfQogICAgZisrOwogIH0KfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jbGVhbnVwU2VtYW50aWNMb3NzbGVzcyA9IGZ1bmN0aW9uIChhKSB7CiAgZnVuY3Rpb24gYihhLCBiKSB7CiAgICBpZiAoIWEgfHwgIWIpIHJldHVybiA2OwogICAgdmFyIGMgPSBhLmNoYXJBdChhLmxlbmd0aCAtIDEpLAogICAgICBkID0gYi5jaGFyQXQoMCksCiAgICAgIGUgPSBjLm1hdGNoKGRpZmZfbWF0Y2hfcGF0Y2gubm9uQWxwaGFOdW1lcmljUmVnZXhfKSwKICAgICAgZiA9IGQubWF0Y2goZGlmZl9tYXRjaF9wYXRjaC5ub25BbHBoYU51bWVyaWNSZWdleF8pLAogICAgICBnID0gZSAmJiBjLm1hdGNoKGRpZmZfbWF0Y2hfcGF0Y2gud2hpdGVzcGFjZVJlZ2V4XyksCiAgICAgIGggPSBmICYmIGQubWF0Y2goZGlmZl9tYXRjaF9wYXRjaC53aGl0ZXNwYWNlUmVnZXhfKTsKICAgIGMgPSBnICYmIGMubWF0Y2goZGlmZl9tYXRjaF9wYXRjaC5saW5lYnJlYWtSZWdleF8pOwogICAgZCA9IGggJiYgZC5tYXRjaChkaWZmX21hdGNoX3BhdGNoLmxpbmVicmVha1JlZ2V4Xyk7CiAgICB2YXIgayA9IGMgJiYgYS5tYXRjaChkaWZmX21hdGNoX3BhdGNoLmJsYW5rbGluZUVuZFJlZ2V4XyksCiAgICAgIGwgPSBkICYmIGIubWF0Y2goZGlmZl9tYXRjaF9wYXRjaC5ibGFua2xpbmVTdGFydFJlZ2V4Xyk7CiAgICByZXR1cm4gayB8fCBsID8gNSA6IGMgfHwgZCA/IDQgOiBlICYmICFnICYmIGggPyAzIDogZyB8fCBoID8gMiA6IGUgfHwgZiA/IDEgOiAwOwogIH0KICBmb3IgKHZhciBjID0gMTsgYyA8IGEubGVuZ3RoIC0gMTspIHsKICAgIGlmIChhW2MgLSAxXVswXSA9PSBESUZGX0VRVUFMICYmIGFbYyArIDFdWzBdID09IERJRkZfRVFVQUwpIHsKICAgICAgdmFyIGQgPSBhW2MgLSAxXVsxXSwKICAgICAgICBlID0gYVtjXVsxXSwKICAgICAgICBmID0gYVtjICsgMV1bMV0sCiAgICAgICAgZyA9IHRoaXMuZGlmZl9jb21tb25TdWZmaXgoZCwgZSk7CiAgICAgIGlmIChnKSB7CiAgICAgICAgdmFyIGggPSBlLnN1YnN0cmluZyhlLmxlbmd0aCAtIGcpOwogICAgICAgIGQgPSBkLnN1YnN0cmluZygwLCBkLmxlbmd0aCAtIGcpOwogICAgICAgIGUgPSBoICsgZS5zdWJzdHJpbmcoMCwgZS5sZW5ndGggLSBnKTsKICAgICAgICBmID0gaCArIGY7CiAgICAgIH0KICAgICAgZyA9IGQ7CiAgICAgIGggPSBlOwogICAgICBmb3IgKHZhciBsID0gZiwgayA9IGIoZCwgZSkgKyBiKGUsIGYpOyBlLmNoYXJBdCgwKSA9PT0gZi5jaGFyQXQoMCk7KSB7CiAgICAgICAgZCArPSBlLmNoYXJBdCgwKTsKICAgICAgICBlID0gZS5zdWJzdHJpbmcoMSkgKyBmLmNoYXJBdCgwKTsKICAgICAgICBmID0gZi5zdWJzdHJpbmcoMSk7CiAgICAgICAgdmFyIG0gPSBiKGQsIGUpICsgYihlLCBmKTsKICAgICAgICBtID49IGsgJiYgKGsgPSBtLCBnID0gZCwgaCA9IGUsIGwgPSBmKTsKICAgICAgfQogICAgICBhW2MgLSAxXVsxXSAhPSBnICYmIChnID8gYVtjIC0gMV1bMV0gPSBnIDogKGEuc3BsaWNlKGMgLSAxLCAxKSwgYy0tKSwgYVtjXVsxXSA9IGgsIGwgPyBhW2MgKyAxXVsxXSA9IGwgOiAoYS5zcGxpY2UoYyArIDEsIDEpLCBjLS0pKTsKICAgIH0KICAgIGMrKzsKICB9Cn07CmRpZmZfbWF0Y2hfcGF0Y2gubm9uQWxwaGFOdW1lcmljUmVnZXhfID0gL1teYS16QS1aMC05XS87CmRpZmZfbWF0Y2hfcGF0Y2gud2hpdGVzcGFjZVJlZ2V4XyA9IC9ccy87CmRpZmZfbWF0Y2hfcGF0Y2gubGluZWJyZWFrUmVnZXhfID0gL1tcclxuXS87CmRpZmZfbWF0Y2hfcGF0Y2guYmxhbmtsaW5lRW5kUmVnZXhfID0gL1xuXHI/XG4kLzsKZGlmZl9tYXRjaF9wYXRjaC5ibGFua2xpbmVTdGFydFJlZ2V4XyA9IC9eXHI/XG5ccj9cbi87CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLmRpZmZfY2xlYW51cEVmZmljaWVuY3kgPSBmdW5jdGlvbiAoYSkgewogIGZvciAodmFyIGIgPSAhMSwgYyA9IFtdLCBkID0gMCwgZSA9IG51bGwsIGYgPSAwLCBnID0gITEsIGggPSAhMSwgbCA9ICExLCBrID0gITE7IGYgPCBhLmxlbmd0aDspIGFbZl1bMF0gPT0gRElGRl9FUVVBTCA/IChhW2ZdWzFdLmxlbmd0aCA8IHRoaXMuRGlmZl9FZGl0Q29zdCAmJiAobCB8fCBrKSA/IChjW2QrK10gPSBmLCBnID0gbCwgaCA9IGssIGUgPSBhW2ZdWzFdKSA6IChkID0gMCwgZSA9IG51bGwpLCBsID0gayA9ICExKSA6IChhW2ZdWzBdID09IERJRkZfREVMRVRFID8gayA9ICEwIDogbCA9ICEwLCBlICYmIChnICYmIGggJiYgbCAmJiBrIHx8IGUubGVuZ3RoIDwgdGhpcy5EaWZmX0VkaXRDb3N0IC8gMiAmJiAzID09IGcgKyBoICsgbCArIGspICYmIChhLnNwbGljZShjW2QgLSAxXSwgMCwgbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0RFTEVURSwgZSkpLCBhW2NbZCAtIDFdICsgMV1bMF0gPSBESUZGX0lOU0VSVCwgZC0tLCBlID0gbnVsbCwgZyAmJiBoID8gKGwgPSBrID0gITAsIGQgPSAwKSA6IChkLS0sIGYgPSAwIDwgZCA/IGNbZCAtIDFdIDogLTEsIGwgPSBrID0gITEpLCBiID0gITApKSwgZisrOwogIGIgJiYgdGhpcy5kaWZmX2NsZWFudXBNZXJnZShhKTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl9jbGVhbnVwTWVyZ2UgPSBmdW5jdGlvbiAoYSkgewogIGEucHVzaChuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfRVFVQUwsICIiKSk7CiAgZm9yICh2YXIgYiA9IDAsIGMgPSAwLCBkID0gMCwgZSA9ICIiLCBmID0gIiIsIGc7IGIgPCBhLmxlbmd0aDspIHN3aXRjaCAoYVtiXVswXSkgewogICAgY2FzZSBESUZGX0lOU0VSVDoKICAgICAgZCsrOwogICAgICBmICs9IGFbYl1bMV07CiAgICAgIGIrKzsKICAgICAgYnJlYWs7CiAgICBjYXNlIERJRkZfREVMRVRFOgogICAgICBjKys7CiAgICAgIGUgKz0gYVtiXVsxXTsKICAgICAgYisrOwogICAgICBicmVhazsKICAgIGNhc2UgRElGRl9FUVVBTDoKICAgICAgMSA8IGMgKyBkID8gKDAgIT09IGMgJiYgMCAhPT0gZCAmJiAoZyA9IHRoaXMuZGlmZl9jb21tb25QcmVmaXgoZiwgZSksIDAgIT09IGcgJiYgKDAgPCBiIC0gYyAtIGQgJiYgYVtiIC0gYyAtIGQgLSAxXVswXSA9PSBESUZGX0VRVUFMID8gYVtiIC0gYyAtIGQgLSAxXVsxXSArPSBmLnN1YnN0cmluZygwLCBnKSA6IChhLnNwbGljZSgwLCAwLCBuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfRVFVQUwsIGYuc3Vic3RyaW5nKDAsIGcpKSksIGIrKyksIGYgPSBmLnN1YnN0cmluZyhnKSwgZSA9IGUuc3Vic3RyaW5nKGcpKSwgZyA9IHRoaXMuZGlmZl9jb21tb25TdWZmaXgoZiwgZSksIDAgIT09IGcgJiYgKGFbYl1bMV0gPSBmLnN1YnN0cmluZyhmLmxlbmd0aCAtIGcpICsgYVtiXVsxXSwgZiA9IGYuc3Vic3RyaW5nKDAsIGYubGVuZ3RoIC0gZyksIGUgPSBlLnN1YnN0cmluZygwLCBlLmxlbmd0aCAtIGcpKSksIGIgLT0gYyArIGQsIGEuc3BsaWNlKGIsIGMgKyBkKSwgZS5sZW5ndGggJiYgKGEuc3BsaWNlKGIsIDAsIG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9ERUxFVEUsIGUpKSwgYisrKSwgZi5sZW5ndGggJiYgKGEuc3BsaWNlKGIsIDAsIG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9JTlNFUlQsIGYpKSwgYisrKSwgYisrKSA6IDAgIT09IGIgJiYgYVtiIC0gMV1bMF0gPT0gRElGRl9FUVVBTCA/IChhW2IgLSAxXVsxXSArPSBhW2JdWzFdLCBhLnNwbGljZShiLCAxKSkgOiBiKyssIGMgPSBkID0gMCwgZiA9IGUgPSAiIjsKICB9CiAgIiIgPT09IGFbYS5sZW5ndGggLSAxXVsxXSAmJiBhLnBvcCgpOwogIGMgPSAhMTsKICBmb3IgKGIgPSAxOyBiIDwgYS5sZW5ndGggLSAxOykgYVtiIC0gMV1bMF0gPT0gRElGRl9FUVVBTCAmJiBhW2IgKyAxXVswXSA9PSBESUZGX0VRVUFMICYmIChhW2JdWzFdLnN1YnN0cmluZyhhW2JdWzFdLmxlbmd0aCAtIGFbYiAtIDFdWzFdLmxlbmd0aCkgPT0gYVtiIC0gMV1bMV0gPyAoYVtiXVsxXSA9IGFbYiAtIDFdWzFdICsgYVtiXVsxXS5zdWJzdHJpbmcoMCwgYVtiXVsxXS5sZW5ndGggLSBhW2IgLSAxXVsxXS5sZW5ndGgpLCBhW2IgKyAxXVsxXSA9IGFbYiAtIDFdWzFdICsgYVtiICsgMV1bMV0sIGEuc3BsaWNlKGIgLSAxLCAxKSwgYyA9ICEwKSA6IGFbYl1bMV0uc3Vic3RyaW5nKDAsIGFbYiArIDFdWzFdLmxlbmd0aCkgPT0gYVtiICsgMV1bMV0gJiYgKGFbYiAtIDFdWzFdICs9IGFbYiArIDFdWzFdLCBhW2JdWzFdID0gYVtiXVsxXS5zdWJzdHJpbmcoYVtiICsgMV1bMV0ubGVuZ3RoKSArIGFbYiArIDFdWzFdLCBhLnNwbGljZShiICsgMSwgMSksIGMgPSAhMCkpLCBiKys7CiAgYyAmJiB0aGlzLmRpZmZfY2xlYW51cE1lcmdlKGEpOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5kaWZmX3hJbmRleCA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgdmFyIGMgPSAwLAogICAgZCA9IDAsCiAgICBlID0gMCwKICAgIGYgPSAwLAogICAgZzsKICBmb3IgKGcgPSAwOyBnIDwgYS5sZW5ndGg7IGcrKykgewogICAgYVtnXVswXSAhPT0gRElGRl9JTlNFUlQgJiYgKGMgKz0gYVtnXVsxXS5sZW5ndGgpOwogICAgYVtnXVswXSAhPT0gRElGRl9ERUxFVEUgJiYgKGQgKz0gYVtnXVsxXS5sZW5ndGgpOwogICAgaWYgKGMgPiBiKSBicmVhazsKICAgIGUgPSBjOwogICAgZiA9IGQ7CiAgfQogIHJldHVybiBhLmxlbmd0aCAhPSBnICYmIGFbZ11bMF0gPT09IERJRkZfREVMRVRFID8gZiA6IGYgKyAoYiAtIGUpOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5kaWZmX3ByZXR0eUh0bWwgPSBmdW5jdGlvbiAoYSkgewogIGZvciAodmFyIGIgPSBbXSwgYyA9IC8mL2csIGQgPSAvPC9nLCBlID0gLz4vZywgZiA9IC9cbi9nLCBnID0gMDsgZyA8IGEubGVuZ3RoOyBnKyspIHsKICAgIHZhciBoID0gYVtnXVswXSwKICAgICAgbCA9IGFbZ11bMV0ucmVwbGFjZShjLCAiJmFtcDsiKS5yZXBsYWNlKGQsICImbHQ7IikucmVwbGFjZShlLCAiJmd0OyIpLnJlcGxhY2UoZiwgIiZwYXJhOzxicj4iKTsKICAgIHN3aXRjaCAoaCkgewogICAgICBjYXNlIERJRkZfSU5TRVJUOgogICAgICAgIGJbZ10gPSAnPGlucyBzdHlsZT0iYmFja2dyb3VuZDojZTZmZmU2OyI+JyArIGwgKyAiPC9pbnM+IjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBESUZGX0RFTEVURToKICAgICAgICBiW2ddID0gJzxkZWwgc3R5bGU9ImJhY2tncm91bmQ6I2ZmZTZlNjsiPicgKyBsICsgIjwvZGVsPiI7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgRElGRl9FUVVBTDoKICAgICAgICBiW2ddID0gIjxzcGFuPiIgKyBsICsgIjwvc3Bhbj4iOwogICAgfQogIH0KICByZXR1cm4gYi5qb2luKCIiKTsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUuZGlmZl90ZXh0MSA9IGZ1bmN0aW9uIChhKSB7CiAgZm9yICh2YXIgYiA9IFtdLCBjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIGFbY11bMF0gIT09IERJRkZfSU5TRVJUICYmIChiW2NdID0gYVtjXVsxXSk7CiAgcmV0dXJuIGIuam9pbigiIik7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLmRpZmZfdGV4dDIgPSBmdW5jdGlvbiAoYSkgewogIGZvciAodmFyIGIgPSBbXSwgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKSBhW2NdWzBdICE9PSBESUZGX0RFTEVURSAmJiAoYltjXSA9IGFbY11bMV0pOwogIHJldHVybiBiLmpvaW4oIiIpOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5kaWZmX2xldmVuc2h0ZWluID0gZnVuY3Rpb24gKGEpIHsKICBmb3IgKHZhciBiID0gMCwgYyA9IDAsIGQgPSAwLCBlID0gMDsgZSA8IGEubGVuZ3RoOyBlKyspIHsKICAgIHZhciBmID0gYVtlXVsxXTsKICAgIHN3aXRjaCAoYVtlXVswXSkgewogICAgICBjYXNlIERJRkZfSU5TRVJUOgogICAgICAgIGMgKz0gZi5sZW5ndGg7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgRElGRl9ERUxFVEU6CiAgICAgICAgZCArPSBmLmxlbmd0aDsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBESUZGX0VRVUFMOgogICAgICAgIGIgKz0gTWF0aC5tYXgoYywgZCksIGQgPSBjID0gMDsKICAgIH0KICB9CiAgcmV0dXJuIGIgKz0gTWF0aC5tYXgoYywgZCk7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLmRpZmZfdG9EZWx0YSA9IGZ1bmN0aW9uIChhKSB7CiAgZm9yICh2YXIgYiA9IFtdLCBjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIHN3aXRjaCAoYVtjXVswXSkgewogICAgY2FzZSBESUZGX0lOU0VSVDoKICAgICAgYltjXSA9ICIrIiArIGVuY29kZVVSSShhW2NdWzFdKTsKICAgICAgYnJlYWs7CiAgICBjYXNlIERJRkZfREVMRVRFOgogICAgICBiW2NdID0gIi0iICsgYVtjXVsxXS5sZW5ndGg7CiAgICAgIGJyZWFrOwogICAgY2FzZSBESUZGX0VRVUFMOgogICAgICBiW2NdID0gIj0iICsgYVtjXVsxXS5sZW5ndGg7CiAgfQogIHJldHVybiBiLmpvaW4oIlx0IikucmVwbGFjZSgvJTIwL2csICIgIik7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLmRpZmZfZnJvbURlbHRhID0gZnVuY3Rpb24gKGEsIGIpIHsKICBmb3IgKHZhciBjID0gW10sIGQgPSAwLCBlID0gMCwgZiA9IGIuc3BsaXQoL1x0L2cpLCBnID0gMDsgZyA8IGYubGVuZ3RoOyBnKyspIHsKICAgIHZhciBoID0gZltnXS5zdWJzdHJpbmcoMSk7CiAgICBzd2l0Y2ggKGZbZ10uY2hhckF0KDApKSB7CiAgICAgIGNhc2UgIisiOgogICAgICAgIHRyeSB7CiAgICAgICAgICBjW2QrK10gPSBuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfSU5TRVJULCBkZWNvZGVVUkkoaCkpOwogICAgICAgIH0gY2F0Y2ggKGspIHsKICAgICAgICAgIHRocm93IEVycm9yKCJJbGxlZ2FsIGVzY2FwZSBpbiBkaWZmX2Zyb21EZWx0YTogIiArIGgpOwogICAgICAgIH0KICAgICAgICBicmVhazsKICAgICAgY2FzZSAiLSI6CiAgICAgIGNhc2UgIj0iOgogICAgICAgIHZhciBsID0gcGFyc2VJbnQoaCwgMTApOwogICAgICAgIGlmIChpc05hTihsKSB8fCAwID4gbCkgdGhyb3cgRXJyb3IoIkludmFsaWQgbnVtYmVyIGluIGRpZmZfZnJvbURlbHRhOiAiICsgaCk7CiAgICAgICAgaCA9IGEuc3Vic3RyaW5nKGUsIGUgKz0gbCk7CiAgICAgICAgIj0iID09IGZbZ10uY2hhckF0KDApID8gY1tkKytdID0gbmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBoKSA6IGNbZCsrXSA9IG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9ERUxFVEUsIGgpOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIGlmIChmW2ddKSB0aHJvdyBFcnJvcigiSW52YWxpZCBkaWZmIG9wZXJhdGlvbiBpbiBkaWZmX2Zyb21EZWx0YTogIiArIGZbZ10pOwogICAgfQogIH0KICBpZiAoZSAhPSBhLmxlbmd0aCkgdGhyb3cgRXJyb3IoIkRlbHRhIGxlbmd0aCAoIiArIGUgKyAiKSBkb2VzIG5vdCBlcXVhbCBzb3VyY2UgdGV4dCBsZW5ndGggKCIgKyBhLmxlbmd0aCArICIpLiIpOwogIHJldHVybiBjOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5tYXRjaF9tYWluID0gZnVuY3Rpb24gKGEsIGIsIGMpIHsKICBpZiAobnVsbCA9PSBhIHx8IG51bGwgPT0gYiB8fCBudWxsID09IGMpIHRocm93IEVycm9yKCJOdWxsIGlucHV0LiAobWF0Y2hfbWFpbikiKTsKICBjID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oYywgYS5sZW5ndGgpKTsKICByZXR1cm4gYSA9PSBiID8gMCA6IGEubGVuZ3RoID8gYS5zdWJzdHJpbmcoYywgYyArIGIubGVuZ3RoKSA9PSBiID8gYyA6IHRoaXMubWF0Y2hfYml0YXBfKGEsIGIsIGMpIDogLTE7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLm1hdGNoX2JpdGFwXyA9IGZ1bmN0aW9uIChhLCBiLCBjKSB7CiAgZnVuY3Rpb24gZChhLCBkKSB7CiAgICB2YXIgZSA9IGEgLyBiLmxlbmd0aCwKICAgICAgZyA9IE1hdGguYWJzKGMgLSBkKTsKICAgIHJldHVybiBmLk1hdGNoX0Rpc3RhbmNlID8gZSArIGcgLyBmLk1hdGNoX0Rpc3RhbmNlIDogZyA/IDEgOiBlOwogIH0KICBpZiAoYi5sZW5ndGggPiB0aGlzLk1hdGNoX01heEJpdHMpIHRocm93IEVycm9yKCJQYXR0ZXJuIHRvbyBsb25nIGZvciB0aGlzIGJyb3dzZXIuIik7CiAgdmFyIGUgPSB0aGlzLm1hdGNoX2FscGhhYmV0XyhiKSwKICAgIGYgPSB0aGlzLAogICAgZyA9IHRoaXMuTWF0Y2hfVGhyZXNob2xkLAogICAgaCA9IGEuaW5kZXhPZihiLCBjKTsKICAtMSAhPSBoICYmIChnID0gTWF0aC5taW4oZCgwLCBoKSwgZyksIGggPSBhLmxhc3RJbmRleE9mKGIsIGMgKyBiLmxlbmd0aCksIC0xICE9IGggJiYgKGcgPSBNYXRoLm1pbihkKDAsIGgpLCBnKSkpOwogIHZhciBsID0gMSA8PCBiLmxlbmd0aCAtIDE7CiAgaCA9IC0xOwogIGZvciAodmFyIGssIG0sIHAgPSBiLmxlbmd0aCArIGEubGVuZ3RoLCB4LCB3ID0gMDsgdyA8IGIubGVuZ3RoOyB3KyspIHsKICAgIGsgPSAwOwogICAgZm9yIChtID0gcDsgayA8IG07KSBkKHcsIGMgKyBtKSA8PSBnID8gayA9IG0gOiBwID0gbSwgbSA9IE1hdGguZmxvb3IoKHAgLSBrKSAvIDIgKyBrKTsKICAgIHAgPSBtOwogICAgayA9IE1hdGgubWF4KDEsIGMgLSBtICsgMSk7CiAgICB2YXIgcSA9IE1hdGgubWluKGMgKyBtLCBhLmxlbmd0aCkgKyBiLmxlbmd0aDsKICAgIG0gPSBBcnJheShxICsgMik7CiAgICBmb3IgKG1bcSArIDFdID0gKDEgPDwgdykgLSAxOyBxID49IGs7IHEtLSkgewogICAgICB2YXIgdCA9IGVbYS5jaGFyQXQocSAtIDEpXTsKICAgICAgbVtxXSA9IDAgPT09IHcgPyAobVtxICsgMV0gPDwgMSB8IDEpICYgdCA6IChtW3EgKyAxXSA8PCAxIHwgMSkgJiB0IHwgKHhbcSArIDFdIHwgeFtxXSkgPDwgMSB8IDEgfCB4W3EgKyAxXTsKICAgICAgaWYgKG1bcV0gJiBsICYmICh0ID0gZCh3LCBxIC0gMSksIHQgPD0gZykpIGlmIChnID0gdCwgaCA9IHEgLSAxLCBoID4gYykgayA9IE1hdGgubWF4KDEsIDIgKiBjIC0gaCk7ZWxzZSBicmVhazsKICAgIH0KICAgIGlmIChkKHcgKyAxLCBjKSA+IGcpIGJyZWFrOwogICAgeCA9IG07CiAgfQogIHJldHVybiBoOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5tYXRjaF9hbHBoYWJldF8gPSBmdW5jdGlvbiAoYSkgewogIGZvciAodmFyIGIgPSB7fSwgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKSBiW2EuY2hhckF0KGMpXSA9IDA7CiAgZm9yIChjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIGJbYS5jaGFyQXQoYyldIHw9IDEgPDwgYS5sZW5ndGggLSBjIC0gMTsKICByZXR1cm4gYjsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wcm90b3R5cGUucGF0Y2hfYWRkQ29udGV4dF8gPSBmdW5jdGlvbiAoYSwgYikgewogIGlmICgwICE9IGIubGVuZ3RoKSB7CiAgICBpZiAobnVsbCA9PT0gYS5zdGFydDIpIHRocm93IEVycm9yKCJwYXRjaCBub3QgaW5pdGlhbGl6ZWQiKTsKICAgIGZvciAodmFyIGMgPSBiLnN1YnN0cmluZyhhLnN0YXJ0MiwgYS5zdGFydDIgKyBhLmxlbmd0aDEpLCBkID0gMDsgYi5pbmRleE9mKGMpICE9IGIubGFzdEluZGV4T2YoYykgJiYgYy5sZW5ndGggPCB0aGlzLk1hdGNoX01heEJpdHMgLSB0aGlzLlBhdGNoX01hcmdpbiAtIHRoaXMuUGF0Y2hfTWFyZ2luOykgZCArPSB0aGlzLlBhdGNoX01hcmdpbiwgYyA9IGIuc3Vic3RyaW5nKGEuc3RhcnQyIC0gZCwgYS5zdGFydDIgKyBhLmxlbmd0aDEgKyBkKTsKICAgIGQgKz0gdGhpcy5QYXRjaF9NYXJnaW47CiAgICAoYyA9IGIuc3Vic3RyaW5nKGEuc3RhcnQyIC0gZCwgYS5zdGFydDIpKSAmJiBhLmRpZmZzLnVuc2hpZnQobmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBjKSk7CiAgICAoZCA9IGIuc3Vic3RyaW5nKGEuc3RhcnQyICsgYS5sZW5ndGgxLCBhLnN0YXJ0MiArIGEubGVuZ3RoMSArIGQpKSAmJiBhLmRpZmZzLnB1c2gobmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBkKSk7CiAgICBhLnN0YXJ0MSAtPSBjLmxlbmd0aDsKICAgIGEuc3RhcnQyIC09IGMubGVuZ3RoOwogICAgYS5sZW5ndGgxICs9IGMubGVuZ3RoICsgZC5sZW5ndGg7CiAgICBhLmxlbmd0aDIgKz0gYy5sZW5ndGggKyBkLmxlbmd0aDsKICB9Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLnBhdGNoX21ha2UgPSBmdW5jdGlvbiAoYSwgYiwgYykgewogIGlmICgic3RyaW5nIiA9PSB0eXBlb2YgYSAmJiAic3RyaW5nIiA9PSB0eXBlb2YgYiAmJiAidW5kZWZpbmVkIiA9PSB0eXBlb2YgYykgewogICAgdmFyIGQgPSBhOwogICAgYiA9IHRoaXMuZGlmZl9tYWluKGQsIGIsICEwKTsKICAgIDIgPCBiLmxlbmd0aCAmJiAodGhpcy5kaWZmX2NsZWFudXBTZW1hbnRpYyhiKSwgdGhpcy5kaWZmX2NsZWFudXBFZmZpY2llbmN5KGIpKTsKICB9IGVsc2UgaWYgKGEgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGEgJiYgInVuZGVmaW5lZCIgPT0gdHlwZW9mIGIgJiYgInVuZGVmaW5lZCIgPT0gdHlwZW9mIGMpIGIgPSBhLCBkID0gdGhpcy5kaWZmX3RleHQxKGIpO2Vsc2UgaWYgKCJzdHJpbmciID09IHR5cGVvZiBhICYmIGIgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGIgJiYgInVuZGVmaW5lZCIgPT0gdHlwZW9mIGMpIGQgPSBhO2Vsc2UgaWYgKCJzdHJpbmciID09IHR5cGVvZiBhICYmICJzdHJpbmciID09IHR5cGVvZiBiICYmIGMgJiYgIm9iamVjdCIgPT0gdHlwZW9mIGMpIGQgPSBhLCBiID0gYztlbHNlIHRocm93IEVycm9yKCJVbmtub3duIGNhbGwgZm9ybWF0IHRvIHBhdGNoX21ha2UuIik7CiAgaWYgKDAgPT09IGIubGVuZ3RoKSByZXR1cm4gW107CiAgYyA9IFtdOwogIGEgPSBuZXcgZGlmZl9tYXRjaF9wYXRjaC5wYXRjaF9vYmooKTsKICBmb3IgKHZhciBlID0gMCwgZiA9IDAsIGcgPSAwLCBoID0gZCwgbCA9IDA7IGwgPCBiLmxlbmd0aDsgbCsrKSB7CiAgICB2YXIgayA9IGJbbF1bMF0sCiAgICAgIG0gPSBiW2xdWzFdOwogICAgZSB8fCBrID09PSBESUZGX0VRVUFMIHx8IChhLnN0YXJ0MSA9IGYsIGEuc3RhcnQyID0gZyk7CiAgICBzd2l0Y2ggKGspIHsKICAgICAgY2FzZSBESUZGX0lOU0VSVDoKICAgICAgICBhLmRpZmZzW2UrK10gPSBiW2xdOwogICAgICAgIGEubGVuZ3RoMiArPSBtLmxlbmd0aDsKICAgICAgICBkID0gZC5zdWJzdHJpbmcoMCwgZykgKyBtICsgZC5zdWJzdHJpbmcoZyk7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgRElGRl9ERUxFVEU6CiAgICAgICAgYS5sZW5ndGgxICs9IG0ubGVuZ3RoOwogICAgICAgIGEuZGlmZnNbZSsrXSA9IGJbbF07CiAgICAgICAgZCA9IGQuc3Vic3RyaW5nKDAsIGcpICsgZC5zdWJzdHJpbmcoZyArIG0ubGVuZ3RoKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBESUZGX0VRVUFMOgogICAgICAgIG0ubGVuZ3RoIDw9IDIgKiB0aGlzLlBhdGNoX01hcmdpbiAmJiBlICYmIGIubGVuZ3RoICE9IGwgKyAxID8gKGEuZGlmZnNbZSsrXSA9IGJbbF0sIGEubGVuZ3RoMSArPSBtLmxlbmd0aCwgYS5sZW5ndGgyICs9IG0ubGVuZ3RoKSA6IG0ubGVuZ3RoID49IDIgKiB0aGlzLlBhdGNoX01hcmdpbiAmJiBlICYmICh0aGlzLnBhdGNoX2FkZENvbnRleHRfKGEsIGgpLCBjLnB1c2goYSksIGEgPSBuZXcgZGlmZl9tYXRjaF9wYXRjaC5wYXRjaF9vYmooKSwgZSA9IDAsIGggPSBkLCBmID0gZyk7CiAgICB9CiAgICBrICE9PSBESUZGX0lOU0VSVCAmJiAoZiArPSBtLmxlbmd0aCk7CiAgICBrICE9PSBESUZGX0RFTEVURSAmJiAoZyArPSBtLmxlbmd0aCk7CiAgfQogIGUgJiYgKHRoaXMucGF0Y2hfYWRkQ29udGV4dF8oYSwgaCksIGMucHVzaChhKSk7CiAgcmV0dXJuIGM7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLnBhdGNoX2RlZXBDb3B5ID0gZnVuY3Rpb24gKGEpIHsKICBmb3IgKHZhciBiID0gW10sIGMgPSAwOyBjIDwgYS5sZW5ndGg7IGMrKykgewogICAgdmFyIGQgPSBhW2NdLAogICAgICBlID0gbmV3IGRpZmZfbWF0Y2hfcGF0Y2gucGF0Y2hfb2JqKCk7CiAgICBlLmRpZmZzID0gW107CiAgICBmb3IgKHZhciBmID0gMDsgZiA8IGQuZGlmZnMubGVuZ3RoOyBmKyspIGUuZGlmZnNbZl0gPSBuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKGQuZGlmZnNbZl1bMF0sIGQuZGlmZnNbZl1bMV0pOwogICAgZS5zdGFydDEgPSBkLnN0YXJ0MTsKICAgIGUuc3RhcnQyID0gZC5zdGFydDI7CiAgICBlLmxlbmd0aDEgPSBkLmxlbmd0aDE7CiAgICBlLmxlbmd0aDIgPSBkLmxlbmd0aDI7CiAgICBiW2NdID0gZTsKICB9CiAgcmV0dXJuIGI7Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLnBhdGNoX2FwcGx5ID0gZnVuY3Rpb24gKGEsIGIpIHsKICBpZiAoMCA9PSBhLmxlbmd0aCkgcmV0dXJuIFtiLCBbXV07CiAgYSA9IHRoaXMucGF0Y2hfZGVlcENvcHkoYSk7CiAgdmFyIGMgPSB0aGlzLnBhdGNoX2FkZFBhZGRpbmcoYSk7CiAgYiA9IGMgKyBiICsgYzsKICB0aGlzLnBhdGNoX3NwbGl0TWF4KGEpOwogIGZvciAodmFyIGQgPSAwLCBlID0gW10sIGYgPSAwOyBmIDwgYS5sZW5ndGg7IGYrKykgewogICAgdmFyIGcgPSBhW2ZdLnN0YXJ0MiArIGQsCiAgICAgIGggPSB0aGlzLmRpZmZfdGV4dDEoYVtmXS5kaWZmcyksCiAgICAgIGwgPSAtMTsKICAgIGlmIChoLmxlbmd0aCA+IHRoaXMuTWF0Y2hfTWF4Qml0cykgewogICAgICB2YXIgayA9IHRoaXMubWF0Y2hfbWFpbihiLCBoLnN1YnN0cmluZygwLCB0aGlzLk1hdGNoX01heEJpdHMpLCBnKTsKICAgICAgLTEgIT0gayAmJiAobCA9IHRoaXMubWF0Y2hfbWFpbihiLCBoLnN1YnN0cmluZyhoLmxlbmd0aCAtIHRoaXMuTWF0Y2hfTWF4Qml0cyksIGcgKyBoLmxlbmd0aCAtIHRoaXMuTWF0Y2hfTWF4Qml0cyksIC0xID09IGwgfHwgayA+PSBsKSAmJiAoayA9IC0xKTsKICAgIH0gZWxzZSBrID0gdGhpcy5tYXRjaF9tYWluKGIsIGgsIGcpOwogICAgaWYgKC0xID09IGspIGVbZl0gPSAhMSwgZCAtPSBhW2ZdLmxlbmd0aDIgLSBhW2ZdLmxlbmd0aDE7ZWxzZSBpZiAoZVtmXSA9ICEwLCBkID0gayAtIGcsIGcgPSAtMSA9PSBsID8gYi5zdWJzdHJpbmcoaywgayArIGgubGVuZ3RoKSA6IGIuc3Vic3RyaW5nKGssIGwgKyB0aGlzLk1hdGNoX01heEJpdHMpLCBoID09IGcpIGIgPSBiLnN1YnN0cmluZygwLCBrKSArIHRoaXMuZGlmZl90ZXh0MihhW2ZdLmRpZmZzKSArIGIuc3Vic3RyaW5nKGsgKyBoLmxlbmd0aCk7ZWxzZSBpZiAoZyA9IHRoaXMuZGlmZl9tYWluKGgsIGcsICExKSwgaC5sZW5ndGggPiB0aGlzLk1hdGNoX01heEJpdHMgJiYgdGhpcy5kaWZmX2xldmVuc2h0ZWluKGcpIC8gaC5sZW5ndGggPiB0aGlzLlBhdGNoX0RlbGV0ZVRocmVzaG9sZCkgZVtmXSA9ICExO2Vsc2UgewogICAgICB0aGlzLmRpZmZfY2xlYW51cFNlbWFudGljTG9zc2xlc3MoZyk7CiAgICAgIGggPSAwOwogICAgICB2YXIgbTsKICAgICAgZm9yIChsID0gMDsgbCA8IGFbZl0uZGlmZnMubGVuZ3RoOyBsKyspIHsKICAgICAgICB2YXIgcCA9IGFbZl0uZGlmZnNbbF07CiAgICAgICAgcFswXSAhPT0gRElGRl9FUVVBTCAmJiAobSA9IHRoaXMuZGlmZl94SW5kZXgoZywgaCkpOwogICAgICAgIHBbMF0gPT09IERJRkZfSU5TRVJUID8gYiA9IGIuc3Vic3RyaW5nKDAsIGsgKyBtKSArIHBbMV0gKyBiLnN1YnN0cmluZyhrICsgbSkgOiBwWzBdID09PSBESUZGX0RFTEVURSAmJiAoYiA9IGIuc3Vic3RyaW5nKDAsIGsgKyBtKSArIGIuc3Vic3RyaW5nKGsgKyB0aGlzLmRpZmZfeEluZGV4KGcsIGggKyBwWzFdLmxlbmd0aCkpKTsKICAgICAgICBwWzBdICE9PSBESUZGX0RFTEVURSAmJiAoaCArPSBwWzFdLmxlbmd0aCk7CiAgICAgIH0KICAgIH0KICB9CiAgYiA9IGIuc3Vic3RyaW5nKGMubGVuZ3RoLCBiLmxlbmd0aCAtIGMubGVuZ3RoKTsKICByZXR1cm4gW2IsIGVdOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5wYXRjaF9hZGRQYWRkaW5nID0gZnVuY3Rpb24gKGEpIHsKICBmb3IgKHZhciBiID0gdGhpcy5QYXRjaF9NYXJnaW4sIGMgPSAiIiwgZCA9IDE7IGQgPD0gYjsgZCsrKSBjICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZCk7CiAgZm9yIChkID0gMDsgZCA8IGEubGVuZ3RoOyBkKyspIGFbZF0uc3RhcnQxICs9IGIsIGFbZF0uc3RhcnQyICs9IGI7CiAgZCA9IGFbMF07CiAgdmFyIGUgPSBkLmRpZmZzOwogIGlmICgwID09IGUubGVuZ3RoIHx8IGVbMF1bMF0gIT0gRElGRl9FUVVBTCkgZS51bnNoaWZ0KG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9FUVVBTCwgYykpLCBkLnN0YXJ0MSAtPSBiLCBkLnN0YXJ0MiAtPSBiLCBkLmxlbmd0aDEgKz0gYiwgZC5sZW5ndGgyICs9IGI7ZWxzZSBpZiAoYiA+IGVbMF1bMV0ubGVuZ3RoKSB7CiAgICB2YXIgZiA9IGIgLSBlWzBdWzFdLmxlbmd0aDsKICAgIGVbMF1bMV0gPSBjLnN1YnN0cmluZyhlWzBdWzFdLmxlbmd0aCkgKyBlWzBdWzFdOwogICAgZC5zdGFydDEgLT0gZjsKICAgIGQuc3RhcnQyIC09IGY7CiAgICBkLmxlbmd0aDEgKz0gZjsKICAgIGQubGVuZ3RoMiArPSBmOwogIH0KICBkID0gYVthLmxlbmd0aCAtIDFdOwogIGUgPSBkLmRpZmZzOwogIDAgPT0gZS5sZW5ndGggfHwgZVtlLmxlbmd0aCAtIDFdWzBdICE9IERJRkZfRVFVQUwgPyAoZS5wdXNoKG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9FUVVBTCwgYykpLCBkLmxlbmd0aDEgKz0gYiwgZC5sZW5ndGgyICs9IGIpIDogYiA+IGVbZS5sZW5ndGggLSAxXVsxXS5sZW5ndGggJiYgKGYgPSBiIC0gZVtlLmxlbmd0aCAtIDFdWzFdLmxlbmd0aCwgZVtlLmxlbmd0aCAtIDFdWzFdICs9IGMuc3Vic3RyaW5nKDAsIGYpLCBkLmxlbmd0aDEgKz0gZiwgZC5sZW5ndGgyICs9IGYpOwogIHJldHVybiBjOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5wYXRjaF9zcGxpdE1heCA9IGZ1bmN0aW9uIChhKSB7CiAgZm9yICh2YXIgYiA9IHRoaXMuTWF0Y2hfTWF4Qml0cywgYyA9IDA7IGMgPCBhLmxlbmd0aDsgYysrKSBpZiAoIShhW2NdLmxlbmd0aDEgPD0gYikpIHsKICAgIHZhciBkID0gYVtjXTsKICAgIGEuc3BsaWNlKGMtLSwgMSk7CiAgICBmb3IgKHZhciBlID0gZC5zdGFydDEsIGYgPSBkLnN0YXJ0MiwgZyA9ICIiOyAwICE9PSBkLmRpZmZzLmxlbmd0aDspIHsKICAgICAgdmFyIGggPSBuZXcgZGlmZl9tYXRjaF9wYXRjaC5wYXRjaF9vYmooKSwKICAgICAgICBsID0gITA7CiAgICAgIGguc3RhcnQxID0gZSAtIGcubGVuZ3RoOwogICAgICBoLnN0YXJ0MiA9IGYgLSBnLmxlbmd0aDsKICAgICAgIiIgIT09IGcgJiYgKGgubGVuZ3RoMSA9IGgubGVuZ3RoMiA9IGcubGVuZ3RoLCBoLmRpZmZzLnB1c2gobmV3IGRpZmZfbWF0Y2hfcGF0Y2guRGlmZihESUZGX0VRVUFMLCBnKSkpOwogICAgICBmb3IgKDsgMCAhPT0gZC5kaWZmcy5sZW5ndGggJiYgaC5sZW5ndGgxIDwgYiAtIHRoaXMuUGF0Y2hfTWFyZ2luOykgewogICAgICAgIGcgPSBkLmRpZmZzWzBdWzBdOwogICAgICAgIHZhciBrID0gZC5kaWZmc1swXVsxXTsKICAgICAgICBnID09PSBESUZGX0lOU0VSVCA/IChoLmxlbmd0aDIgKz0gay5sZW5ndGgsIGYgKz0gay5sZW5ndGgsIGguZGlmZnMucHVzaChkLmRpZmZzLnNoaWZ0KCkpLCBsID0gITEpIDogZyA9PT0gRElGRl9ERUxFVEUgJiYgMSA9PSBoLmRpZmZzLmxlbmd0aCAmJiBoLmRpZmZzWzBdWzBdID09IERJRkZfRVFVQUwgJiYgay5sZW5ndGggPiAyICogYiA/IChoLmxlbmd0aDEgKz0gay5sZW5ndGgsIGUgKz0gay5sZW5ndGgsIGwgPSAhMSwgaC5kaWZmcy5wdXNoKG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoZywgaykpLCBkLmRpZmZzLnNoaWZ0KCkpIDogKGsgPSBrLnN1YnN0cmluZygwLCBiIC0gaC5sZW5ndGgxIC0gdGhpcy5QYXRjaF9NYXJnaW4pLCBoLmxlbmd0aDEgKz0gay5sZW5ndGgsIGUgKz0gay5sZW5ndGgsIGcgPT09IERJRkZfRVFVQUwgPyAoaC5sZW5ndGgyICs9IGsubGVuZ3RoLCBmICs9IGsubGVuZ3RoKSA6IGwgPSAhMSwgaC5kaWZmcy5wdXNoKG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoZywgaykpLCBrID09IGQuZGlmZnNbMF1bMV0gPyBkLmRpZmZzLnNoaWZ0KCkgOiBkLmRpZmZzWzBdWzFdID0gZC5kaWZmc1swXVsxXS5zdWJzdHJpbmcoay5sZW5ndGgpKTsKICAgICAgfQogICAgICBnID0gdGhpcy5kaWZmX3RleHQyKGguZGlmZnMpOwogICAgICBnID0gZy5zdWJzdHJpbmcoZy5sZW5ndGggLSB0aGlzLlBhdGNoX01hcmdpbik7CiAgICAgIGsgPSB0aGlzLmRpZmZfdGV4dDEoZC5kaWZmcykuc3Vic3RyaW5nKDAsIHRoaXMuUGF0Y2hfTWFyZ2luKTsKICAgICAgIiIgIT09IGsgJiYgKGgubGVuZ3RoMSArPSBrLmxlbmd0aCwgaC5sZW5ndGgyICs9IGsubGVuZ3RoLCAwICE9PSBoLmRpZmZzLmxlbmd0aCAmJiBoLmRpZmZzW2guZGlmZnMubGVuZ3RoIC0gMV1bMF0gPT09IERJRkZfRVFVQUwgPyBoLmRpZmZzW2guZGlmZnMubGVuZ3RoIC0gMV1bMV0gKz0gayA6IGguZGlmZnMucHVzaChuZXcgZGlmZl9tYXRjaF9wYXRjaC5EaWZmKERJRkZfRVFVQUwsIGspKSk7CiAgICAgIGwgfHwgYS5zcGxpY2UoKytjLCAwLCBoKTsKICAgIH0KICB9Cn07CmRpZmZfbWF0Y2hfcGF0Y2gucHJvdG90eXBlLnBhdGNoX3RvVGV4dCA9IGZ1bmN0aW9uIChhKSB7CiAgZm9yICh2YXIgYiA9IFtdLCBjID0gMDsgYyA8IGEubGVuZ3RoOyBjKyspIGJbY10gPSBhW2NdOwogIHJldHVybiBiLmpvaW4oIiIpOwp9OwpkaWZmX21hdGNoX3BhdGNoLnByb3RvdHlwZS5wYXRjaF9mcm9tVGV4dCA9IGZ1bmN0aW9uIChhKSB7CiAgdmFyIGIgPSBbXTsKICBpZiAoIWEpIHJldHVybiBiOwogIGEgPSBhLnNwbGl0KCJcbiIpOwogIGZvciAodmFyIGMgPSAwLCBkID0gL15AQCAtKFxkKyksPyhcZCopIFwrKFxkKyksPyhcZCopIEBAJC87IGMgPCBhLmxlbmd0aDspIHsKICAgIHZhciBlID0gYVtjXS5tYXRjaChkKTsKICAgIGlmICghZSkgdGhyb3cgRXJyb3IoIkludmFsaWQgcGF0Y2ggc3RyaW5nOiAiICsgYVtjXSk7CiAgICB2YXIgZiA9IG5ldyBkaWZmX21hdGNoX3BhdGNoLnBhdGNoX29iaigpOwogICAgYi5wdXNoKGYpOwogICAgZi5zdGFydDEgPSBwYXJzZUludChlWzFdLCAxMCk7CiAgICAiIiA9PT0gZVsyXSA/IChmLnN0YXJ0MS0tLCBmLmxlbmd0aDEgPSAxKSA6ICIwIiA9PSBlWzJdID8gZi5sZW5ndGgxID0gMCA6IChmLnN0YXJ0MS0tLCBmLmxlbmd0aDEgPSBwYXJzZUludChlWzJdLCAxMCkpOwogICAgZi5zdGFydDIgPSBwYXJzZUludChlWzNdLCAxMCk7CiAgICAiIiA9PT0gZVs0XSA/IChmLnN0YXJ0Mi0tLCBmLmxlbmd0aDIgPSAxKSA6ICIwIiA9PSBlWzRdID8gZi5sZW5ndGgyID0gMCA6IChmLnN0YXJ0Mi0tLCBmLmxlbmd0aDIgPSBwYXJzZUludChlWzRdLCAxMCkpOwogICAgZm9yIChjKys7IGMgPCBhLmxlbmd0aDspIHsKICAgICAgZSA9IGFbY10uY2hhckF0KDApOwogICAgICB0cnkgewogICAgICAgIHZhciBnID0gZGVjb2RlVVJJKGFbY10uc3Vic3RyaW5nKDEpKTsKICAgICAgfSBjYXRjaCAoaCkgewogICAgICAgIHRocm93IEVycm9yKCJJbGxlZ2FsIGVzY2FwZSBpbiBwYXRjaF9mcm9tVGV4dDogIiArIGcpOwogICAgICB9CiAgICAgIGlmICgiLSIgPT0gZSkgZi5kaWZmcy5wdXNoKG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9ERUxFVEUsIGcpKTtlbHNlIGlmICgiKyIgPT0gZSkgZi5kaWZmcy5wdXNoKG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9JTlNFUlQsIGcpKTtlbHNlIGlmICgiICIgPT0gZSkgZi5kaWZmcy5wdXNoKG5ldyBkaWZmX21hdGNoX3BhdGNoLkRpZmYoRElGRl9FUVVBTCwgZykpO2Vsc2UgaWYgKCJAIiA9PSBlKSBicmVhaztlbHNlIGlmICgiIiAhPT0gZSkgdGhyb3cgRXJyb3IoJ0ludmFsaWQgcGF0Y2ggbW9kZSAiJyArIGUgKyAnIiBpbjogJyArIGcpOwogICAgICBjKys7CiAgICB9CiAgfQogIHJldHVybiBiOwp9OwpkaWZmX21hdGNoX3BhdGNoLnBhdGNoX29iaiA9IGZ1bmN0aW9uICgpIHsKICB0aGlzLmRpZmZzID0gW107CiAgdGhpcy5zdGFydDIgPSB0aGlzLnN0YXJ0MSA9IG51bGw7CiAgdGhpcy5sZW5ndGgyID0gdGhpcy5sZW5ndGgxID0gMDsKfTsKZGlmZl9tYXRjaF9wYXRjaC5wYXRjaF9vYmoucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewogIGZvciAodmFyIGEgPSBbIkBAIC0iICsgKDAgPT09IHRoaXMubGVuZ3RoMSA/IHRoaXMuc3RhcnQxICsgIiwwIiA6IDEgPT0gdGhpcy5sZW5ndGgxID8gdGhpcy5zdGFydDEgKyAxIDogdGhpcy5zdGFydDEgKyAxICsgIiwiICsgdGhpcy5sZW5ndGgxKSArICIgKyIgKyAoMCA9PT0gdGhpcy5sZW5ndGgyID8gdGhpcy5zdGFydDIgKyAiLDAiIDogMSA9PSB0aGlzLmxlbmd0aDIgPyB0aGlzLnN0YXJ0MiArIDEgOiB0aGlzLnN0YXJ0MiArIDEgKyAiLCIgKyB0aGlzLmxlbmd0aDIpICsgIiBAQFxuIl0sIGIsIGMgPSAwOyBjIDwgdGhpcy5kaWZmcy5sZW5ndGg7IGMrKykgewogICAgc3dpdGNoICh0aGlzLmRpZmZzW2NdWzBdKSB7CiAgICAgIGNhc2UgRElGRl9JTlNFUlQ6CiAgICAgICAgYiA9ICIrIjsKICAgICAgICBicmVhazsKICAgICAgY2FzZSBESUZGX0RFTEVURToKICAgICAgICBiID0gIi0iOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlIERJRkZfRVFVQUw6CiAgICAgICAgYiA9ICIgIjsKICAgIH0KICAgIGFbYyArIDFdID0gYiArIGVuY29kZVVSSSh0aGlzLmRpZmZzW2NdWzFdKSArICJcbiI7CiAgfQogIHJldHVybiBhLmpvaW4oIiIpLnJlcGxhY2UoLyUyMC9nLCAiICIpOwp9Owp0aGlzLmRpZmZfbWF0Y2hfcGF0Y2ggPSBkaWZmX21hdGNoX3BhdGNoOwp0aGlzLkRJRkZfREVMRVRFID0gRElGRl9ERUxFVEU7CnRoaXMuRElGRl9JTlNFUlQgPSBESUZGX0lOU0VSVDsKdGhpcy5ESUZGX0VRVUFMID0gRElGRl9FUVVBTDsKd2luZG93LmRpZmZfbWF0Y2hfcGF0Y2ggPSBkaWZmX21hdGNoX3BhdGNoOwp3aW5kb3cuRElGRl9JTlNFUlQgPSBESUZGX0lOU0VSVDsKd2luZG93LkRJRkZfREVMRVRFID0gRElGRl9ERUxFVEU7CndpbmRvdy5ESUZGX0VRVUFMID0gRElGRl9FUVVBTDs="},null]}