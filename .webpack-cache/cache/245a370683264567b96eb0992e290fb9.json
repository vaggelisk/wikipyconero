{"remainingRequest":"/home/kantro/WebstormProjects/wikipyconero/node_modules/babel-loader/lib/index.js??ref--0-1!/home/kantro/WebstormProjects/wikipyconero/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/kantro/WebstormProjects/wikipyconero/client/components/editor/editor-modal-media.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/kantro/WebstormProjects/wikipyconero/client/components/editor/editor-modal-media.vue","mtime":1695287603863},{"path":"/home/kantro/WebstormProjects/wikipyconero/.babelrc","mtime":1695287603859},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/cache-loader/dist/cjs.js","mtime":1694896091905},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/babel-loader/lib/index.js","mtime":1694896091857},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/vue-loader/lib/index.js","mtime":1695231282570}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9nZXQgZnJvbSAibG9kYXNoL2dldCI7CmltcG9ydCBfbGFzdCBmcm9tICJsb2Rhc2gvbGFzdCI7CmltcG9ydCBfZGVsYXkgZnJvbSAibG9kYXNoL2RlbGF5IjsKaW1wb3J0IF9maW5kIGZyb20gImxvZGFzaC9maW5kIjsKaW1wb3J0IF9jb21wYWN0IGZyb20gImxvZGFzaC9jb21wYWN0IjsgLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0LCBzeW5jIH0gZnJvbSAndnVleC1wYXRoaWZ5JzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHZ1ZUZpbGVQb25kIGZyb20gJ3Z1ZS1maWxlcG9uZCc7CmltcG9ydCAnZmlsZXBvbmQvZGlzdC9maWxlcG9uZC5taW4uY3NzJzsKaW1wb3J0IGxpc3RBc3NldFF1ZXJ5IGZyb20gJ2dxbC9lZGl0b3IvZWRpdG9yLW1lZGlhLXF1ZXJ5LWxpc3QuZ3FsJzsKaW1wb3J0IGxpc3RGb2xkZXJBc3NldFF1ZXJ5IGZyb20gJ2dxbC9lZGl0b3IvZWRpdG9yLW1lZGlhLXF1ZXJ5LWZvbGRlci1saXN0LmdxbCc7CmltcG9ydCBjcmVhdGVBc3NldEZvbGRlck11dGF0aW9uIGZyb20gJ2dxbC9lZGl0b3IvZWRpdG9yLW1lZGlhLW11dGF0aW9uLWZvbGRlci1jcmVhdGUuZ3FsJzsKaW1wb3J0IHJlbmFtZUFzc2V0TXV0YXRpb24gZnJvbSAnZ3FsL2VkaXRvci9lZGl0b3ItbWVkaWEtbXV0YXRpb24tYXNzZXQtcmVuYW1lLmdxbCc7CmltcG9ydCBkZWxldGVBc3NldE11dGF0aW9uIGZyb20gJ2dxbC9lZGl0b3IvZWRpdG9yLW1lZGlhLW11dGF0aW9uLWFzc2V0LWRlbGV0ZS5ncWwnOwpjb25zdCBGaWxlUG9uZCA9IHZ1ZUZpbGVQb25kKCk7CmNvbnN0IGxvY2FsZVNlZ21lbnRSZWdleCA9IC9eW0EtWl17Mn0oLVtBLVpdezJ9KT8kL2k7CmNvbnN0IGRpc2FsbG93ZWRGb2xkZXJDaGFycyA9IC9bQS1aKCk9LiFAIyQlPyYqK2B+PD4sOzpcXC9bXF3CrHt8IF0vOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRmlsZVBvbmQKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvbGRlcnM6IFtdLAogICAgICBmaWxlczogW10sCiAgICAgIGFzc2V0czogW10sCiAgICAgIHBhZ2luYXRpb246IDEsCiAgICAgIHJlbW90ZUltYWdlVXJsOiAnJywKICAgICAgaW1hZ2VBbGlnbm1lbnRzOiBbewogICAgICAgIHRleHQ6ICdOb25lJywKICAgICAgICB2YWx1ZTogJycKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdMZWZ0JywKICAgICAgICB2YWx1ZTogJ2xlZnQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAnQ2VudGVyZWQnLAogICAgICAgIHZhbHVlOiAnY2VudGVyJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ1JpZ2h0JywKICAgICAgICB2YWx1ZTogJ3JpZ2h0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ0Fic29sdXRlIFRvcCBSaWdodCcsCiAgICAgICAgdmFsdWU6ICdhYnN0b3ByaWdodCcKICAgICAgfV0sCiAgICAgIGltYWdlQWxpZ25tZW50OiAnJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG5ld0ZvbGRlckRpYWxvZzogZmFsc2UsCiAgICAgIG5ld0ZvbGRlck5hbWU6ICcnLAogICAgICBuZXdGb2xkZXJMb2FkaW5nOiBmYWxzZSwKICAgICAgcHJldmlld0RpYWxvZzogZmFsc2UsCiAgICAgIHJlbmFtZURpYWxvZzogZmFsc2UsCiAgICAgIHJlbmFtZUFzc2V0TmFtZTogJycsCiAgICAgIHJlbmFtZUFzc2V0TG9hZGluZzogZmFsc2UsCiAgICAgIGRlbGV0ZURpYWxvZzogZmFsc2UsCiAgICAgIGRlbGV0ZUFzc2V0TG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgaXNTaG93bjogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7CiAgICAgIH0sCiAgICAgIHNldCh2YWwpIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHZhbCk7CiAgICAgIH0KICAgIH0sCiAgICBlZGl0b3JLZXk6IGdldCgnZWRpdG9yL2VkaXRvcktleScpLAogICAgYWN0aXZlTW9kYWw6IHN5bmMoJ2VkaXRvci9hY3RpdmVNb2RhbCcpLAogICAgZm9sZGVyVHJlZTogZ2V0KCdlZGl0b3IvbWVkaWFAZm9sZGVyVHJlZScpLAogICAgY3VycmVudEZvbGRlcklkOiBzeW5jKCdlZGl0b3IvbWVkaWFAY3VycmVudEZvbGRlcklkJyksCiAgICBjdXJyZW50RmlsZUlkOiBzeW5jKCdlZGl0b3IvbWVkaWFAY3VycmVudEZpbGVJZCcpLAogICAgcGFnZVRvdGFsKCkgewogICAgICBpZiAoIXRoaXMuYXNzZXRzKSB7CiAgICAgICAgcmV0dXJuIDA7CiAgICAgIH0KICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLmFzc2V0cy5sZW5ndGggLyAxNSk7CiAgICB9LAogICAgaGVhZGVycygpIHsKICAgICAgcmV0dXJuIF9jb21wYWN0KFt0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQuc21BbmRVcCAmJiB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5oZWFkZXJJZCcpLAogICAgICAgIHZhbHVlOiAnaWQnLAogICAgICAgIHdpZHRoOiA4MAogICAgICB9LCB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5oZWFkZXJGaWxlbmFtZScpLAogICAgICAgIHZhbHVlOiAnZmlsZW5hbWUnCiAgICAgIH0sIHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5sZ0FuZFVwICYmIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLmhlYWRlclR5cGUnKSwKICAgICAgICB2YWx1ZTogJ2V4dCcsCiAgICAgICAgd2lkdGg6IDkwCiAgICAgIH0sIHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5tZEFuZFVwICYmIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLmhlYWRlckZpbGVTaXplJyksCiAgICAgICAgdmFsdWU6ICdmaWxlU2l6ZScsCiAgICAgICAgd2lkdGg6IDExMAogICAgICB9LCB0aGlzLiR2dWV0aWZ5LmJyZWFrcG9pbnQubWRBbmRVcCAmJiB7CiAgICAgICAgdGV4dDogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5oZWFkZXJBZGRlZCcpLAogICAgICAgIHZhbHVlOiAnY3JlYXRlZEF0JywKICAgICAgICB3aWR0aDogMTc1CiAgICAgIH0sIHRoaXMuJHZ1ZXRpZnkuYnJlYWtwb2ludC5zbUFuZFVwICYmIHsKICAgICAgICB0ZXh0OiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLmhlYWRlckFjdGlvbnMnKSwKICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgd2lkdGg6IDgwLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICBhbGlnbjogJ3JpZ2h0JwogICAgICB9XSk7CiAgICB9LAogICAgaXNGb2xkZXJOYW1lVmFsaWQoKSB7CiAgICAgIHJldHVybiB0aGlzLm5ld0ZvbGRlck5hbWUubGVuZ3RoID4gMSAmJiAhbG9jYWxlU2VnbWVudFJlZ2V4LnRlc3QodGhpcy5uZXdGb2xkZXJOYW1lKSAmJiAhZGlzYWxsb3dlZEZvbGRlckNoYXJzLnRlc3QodGhpcy5uZXdGb2xkZXJOYW1lKTsKICAgIH0sCiAgICBjdXJyZW50QXNzZXQoKSB7CiAgICAgIHJldHVybiBfZmluZCh0aGlzLmFzc2V0cywgWydpZCcsIHRoaXMuY3VycmVudEZpbGVJZF0pIHx8IHt9OwogICAgfSwKICAgIGZpbGVQb25kU2VydmVyT3B0cygpIHsKICAgICAgY29uc3Qgand0VG9rZW4gPSBDb29raWVzLmdldCgnand0Jyk7CiAgICAgIHJldHVybiB7CiAgICAgICAgcHJvY2VzczogewogICAgICAgICAgdXJsOiAnL3UnLAogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtqd3RUb2tlbn1gCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG5ld0ZvbGRlckRpYWxvZyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kcmVmcy5mb2xkZXJOYW1lSXB0LmZvY3VzKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAogIGZpbHRlcnM6IHsKICAgIHByZXR0eUJ5dGVzKG51bSkgewogICAgICBpZiAodHlwZW9mIG51bSAhPT0gJ251bWJlcicgfHwgaXNOYU4obnVtKSkgewogICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIGEgbnVtYmVyJyk7CiAgICAgIH0KICAgICAgbGV0IGV4cG9uZW50OwogICAgICBsZXQgdW5pdDsKICAgICAgbGV0IG5lZyA9IG51bSA8IDA7CiAgICAgIGxldCB1bml0cyA9IFsnQicsICdrQicsICdNQicsICdHQicsICdUQicsICdQQicsICdFQicsICdaQicsICdZQiddOwogICAgICBpZiAobmVnKSB7CiAgICAgICAgbnVtID0gLW51bTsKICAgICAgfQogICAgICBpZiAobnVtIDwgMSkgewogICAgICAgIHJldHVybiAobmVnID8gJy0nIDogJycpICsgbnVtICsgJyBCJzsKICAgICAgfQogICAgICBleHBvbmVudCA9IE1hdGgubWluKE1hdGguZmxvb3IoTWF0aC5sb2cobnVtKSAvIE1hdGgubG9nKDEwMDApKSwgdW5pdHMubGVuZ3RoIC0gMSk7CiAgICAgIG51bSA9IChudW0gLyBNYXRoLnBvdygxMDAwLCBleHBvbmVudCkpLnRvRml4ZWQoMikgKiAxOwogICAgICB1bml0ID0gdW5pdHNbZXhwb25lbnRdOwogICAgICByZXR1cm4gKG5lZyA/ICctJyA6ICcnKSArIG51bSArICcgJyArIHVuaXQ7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyByZWZyZXNoKCkgewogICAgICBhd2FpdCB0aGlzLiRhcG9sbG8ucXVlcmllcy5hc3NldHMucmVmZXRjaCgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5yZWZyZXNoU3VjY2VzcycpLAogICAgICAgIHN0eWxlOiAnc3VjY2VzcycsCiAgICAgICAgaWNvbjogJ2NoZWNrJwogICAgICB9KTsKICAgIH0sCiAgICBpbnNlcnQoKSB7CiAgICAgIGNvbnN0IGFzc2V0ID0gX2ZpbmQodGhpcy5hc3NldHMsIFsnaWQnLCB0aGlzLmN1cnJlbnRGaWxlSWRdKTsKICAgICAgY29uc3QgYXNzZXRQYXRoID0gdGhpcy5mb2xkZXJUcmVlLm1hcChmID0+IGYuc2x1Zykuam9pbignLycpOwogICAgICB0aGlzLiRyb290LiRlbWl0KCdlZGl0b3JJbnNlcnQnLCB7CiAgICAgICAga2luZDogYXNzZXQua2luZCwKICAgICAgICBwYXRoOiB0aGlzLmN1cnJlbnRGb2xkZXJJZCA+IDAgPyBgLyR7YXNzZXRQYXRofS8ke2Fzc2V0LmZpbGVuYW1lfWAgOiBgLyR7YXNzZXQuZmlsZW5hbWV9YCwKICAgICAgICB0ZXh0OiBhc3NldC5maWxlbmFtZSwKICAgICAgICBhbGlnbjogdGhpcy5pbWFnZUFsaWdubWVudAogICAgICB9KTsKICAgICAgdGhpcy5hY3RpdmVNb2RhbCA9ICcnOwogICAgfSwKICAgIGJyb3dzZSgpIHsKICAgICAgdGhpcy4kcmVmcy5wb25kLmJyb3dzZSgpOwogICAgfSwKICAgIGFzeW5jIHVwbG9hZCgpIHsKICAgICAgY29uc3QgZmlsZXMgPSB0aGlzLiRyZWZzLnBvbmQuZ2V0RmlsZXMoKTsKICAgICAgaWYgKGZpbGVzLmxlbmd0aCA8IDEpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuY29tbWl0KCdzaG93Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgnZWRpdG9yOmFzc2V0cy5ub1VwbG9hZEVycm9yJyksCiAgICAgICAgICBzdHlsZTogJ3dhcm5pbmcnLAogICAgICAgICAgaWNvbjogJ3dhcm5pbmcnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgZm9yIChsZXQgZmlsZSBvZiBmaWxlcykgewogICAgICAgIGZpbGUuc2V0TWV0YWRhdGEoewogICAgICAgICAgZm9sZGVySWQ6IHRoaXMuY3VycmVudEZvbGRlcklkCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgYXdhaXQgdGhpcy4kcmVmcy5wb25kLnByb2Nlc3NGaWxlcygpOwogICAgfSwKICAgIGFzeW5jIG9uRmlsZVByb2Nlc3NlZChlcnIsIGZpbGUpIHsKICAgICAgaWYgKGVycikgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5jb21taXQoJ3Nob3dOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLnVwbG9hZEZhaWxlZCcpLAogICAgICAgICAgc3R5bGU6ICdlcnJvcicsCiAgICAgICAgICBpY29uOiAnZXJyb3InCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgX2RlbGF5KCgpID0+IHsKICAgICAgICB0aGlzLiRyZWZzLnBvbmQucmVtb3ZlRmlsZShmaWxlLmlkKTsKICAgICAgfSwgNTAwMCk7CiAgICAgIGF3YWl0IHRoaXMuJGFwb2xsby5xdWVyaWVzLmFzc2V0cy5yZWZldGNoKCk7CiAgICB9LAogICAgZG93bkZvbGRlcihmb2xkZXIpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdlZGl0b3IvcHVzaE1lZGlhRm9sZGVyVHJlZScsIGZvbGRlcik7CiAgICAgIHRoaXMuY3VycmVudEZvbGRlcklkID0gZm9sZGVyLmlkOwogICAgICB0aGlzLmN1cnJlbnRGaWxlSWQgPSBudWxsOwogICAgfSwKICAgIHVwRm9sZGVyKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2VkaXRvci9wb3BNZWRpYUZvbGRlclRyZWUnKTsKICAgICAgY29uc3QgcGFyZW50Rm9sZGVyID0gX2xhc3QodGhpcy5mb2xkZXJUcmVlKTsKICAgICAgdGhpcy5jdXJyZW50Rm9sZGVySWQgPSBwYXJlbnRGb2xkZXIgPyBwYXJlbnRGb2xkZXIuaWQgOiAwOwogICAgICB0aGlzLmN1cnJlbnRGaWxlSWQgPSBudWxsOwogICAgfSwKICAgIGFzeW5jIGNyZWF0ZUZvbGRlcigpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGBsb2FkaW5nU3RhcnRgLCAnZWRpdG9yLW1lZGlhLWNyZWF0ZWZvbGRlcicpOwogICAgICB0aGlzLm5ld0ZvbGRlckxvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3AgPSBhd2FpdCB0aGlzLiRhcG9sbG8ubXV0YXRlKHsKICAgICAgICAgIG11dGF0aW9uOiBjcmVhdGVBc3NldEZvbGRlck11dGF0aW9uLAogICAgICAgICAgdmFyaWFibGVzOiB7CiAgICAgICAgICAgIHBhcmVudEZvbGRlcklkOiB0aGlzLmN1cnJlbnRGb2xkZXJJZCwKICAgICAgICAgICAgc2x1ZzogdGhpcy5uZXdGb2xkZXJOYW1lCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgaWYgKF9nZXQocmVzcCwgJ2RhdGEuYXNzZXRzLmNyZWF0ZUZvbGRlci5yZXNwb25zZVJlc3VsdC5zdWNjZWVkZWQnLCBmYWxzZSkpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuJGFwb2xsby5xdWVyaWVzLmZvbGRlcnMucmVmZXRjaCgpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzaG93Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLmZvbGRlckNyZWF0ZVN1Y2Nlc3MnKSwKICAgICAgICAgICAgc3R5bGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgaWNvbjogJ2NoZWNrJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLm5ld0ZvbGRlckRpYWxvZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5uZXdGb2xkZXJOYW1lID0gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgncHVzaEdyYXBoRXJyb3InLCBuZXcgRXJyb3IoX2dldChyZXNwLCAnZGF0YS5hc3NldHMuY3JlYXRlRm9sZGVyLnJlc3BvbnNlUmVzdWx0Lm1lc3NhZ2UnKSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdwdXNoR3JhcGhFcnJvcicsIGVycik7CiAgICAgIH0KICAgICAgdGhpcy5uZXdGb2xkZXJMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgbG9hZGluZ1N0b3BgLCAnZWRpdG9yLW1lZGlhLWNyZWF0ZWZvbGRlcicpOwogICAgfSwKICAgIG9wZW5SZW5hbWVEaWFsb2coKSB7CiAgICAgIHRoaXMucmVuYW1lQXNzZXROYW1lID0gdGhpcy5jdXJyZW50QXNzZXQuZmlsZW5hbWU7CiAgICAgIHRoaXMucmVuYW1lRGlhbG9nID0gdHJ1ZTsKICAgIH0sCiAgICBhc3luYyByZW5hbWVBc3NldCgpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGBsb2FkaW5nU3RhcnRgLCAnZWRpdG9yLW1lZGlhLXJlbmFtZWFzc2V0Jyk7CiAgICAgIHRoaXMucmVuYW1lQXNzZXRMb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgdGhpcy4kYXBvbGxvLm11dGF0ZSh7CiAgICAgICAgICBtdXRhdGlvbjogcmVuYW1lQXNzZXRNdXRhdGlvbiwKICAgICAgICAgIHZhcmlhYmxlczogewogICAgICAgICAgICBpZDogdGhpcy5jdXJyZW50RmlsZUlkLAogICAgICAgICAgICBmaWxlbmFtZTogdGhpcy5yZW5hbWVBc3NldE5hbWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBpZiAoX2dldChyZXNwLCAnZGF0YS5hc3NldHMucmVuYW1lQXNzZXQucmVzcG9uc2VSZXN1bHQuc3VjY2VlZGVkJywgZmFsc2UpKSB7CiAgICAgICAgICBhd2FpdCB0aGlzLiRhcG9sbG8ucXVlcmllcy5hc3NldHMucmVmZXRjaCgpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzaG93Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLnJlbmFtZVN1Y2Nlc3MnKSwKICAgICAgICAgICAgc3R5bGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgaWNvbjogJ2NoZWNrJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnJlbmFtZURpYWxvZyA9IGZhbHNlOwogICAgICAgICAgdGhpcy5yZW5hbWVBc3NldE5hbWUgPSAnJzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdwdXNoR3JhcGhFcnJvcicsIG5ldyBFcnJvcihfZ2V0KHJlc3AsICdkYXRhLmFzc2V0cy5yZW5hbWVBc3NldC5yZXNwb25zZVJlc3VsdC5tZXNzYWdlJykpKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgncHVzaEdyYXBoRXJyb3InLCBlcnIpOwogICAgICB9CiAgICAgIHRoaXMucmVuYW1lQXNzZXRMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgbG9hZGluZ1N0b3BgLCAnZWRpdG9yLW1lZGlhLXJlbmFtZWFzc2V0Jyk7CiAgICB9LAogICAgYXN5bmMgZGVsZXRlQXNzZXQoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgbG9hZGluZ1N0YXJ0YCwgJ2VkaXRvci1tZWRpYS1kZWxldGVhc3NldCcpOwogICAgICB0aGlzLmRlbGV0ZUFzc2V0TG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IHRoaXMuJGFwb2xsby5tdXRhdGUoewogICAgICAgICAgbXV0YXRpb246IGRlbGV0ZUFzc2V0TXV0YXRpb24sCiAgICAgICAgICB2YXJpYWJsZXM6IHsKICAgICAgICAgICAgaWQ6IHRoaXMuY3VycmVudEZpbGVJZAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGlmIChfZ2V0KHJlc3AsICdkYXRhLmFzc2V0cy5kZWxldGVBc3NldC5yZXNwb25zZVJlc3VsdC5zdWNjZWVkZWQnLCBmYWxzZSkpIHsKICAgICAgICAgIHRoaXMuY3VycmVudEZpbGVJZCA9IG51bGw7CiAgICAgICAgICBhd2FpdCB0aGlzLiRhcG9sbG8ucXVlcmllcy5hc3NldHMucmVmZXRjaCgpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzaG93Tm90aWZpY2F0aW9uJywgewogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCdlZGl0b3I6YXNzZXRzLmRlbGV0ZVN1Y2Nlc3MnKSwKICAgICAgICAgICAgc3R5bGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgaWNvbjogJ2NoZWNrJwogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLmRlbGV0ZURpYWxvZyA9IGZhbHNlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3B1c2hHcmFwaEVycm9yJywgbmV3IEVycm9yKF9nZXQocmVzcCwgJ2RhdGEuYXNzZXRzLmRlbGV0ZUFzc2V0LnJlc3BvbnNlUmVzdWx0Lm1lc3NhZ2UnKSkpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdwdXNoR3JhcGhFcnJvcicsIGVycik7CiAgICAgIH0KICAgICAgdGhpcy5kZWxldGVBc3NldExvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGBsb2FkaW5nU3RvcGAsICdlZGl0b3ItbWVkaWEtZGVsZXRlYXNzZXQnKTsKICAgIH0sCiAgICBjYW5jZWwoKSB7CiAgICAgIHRoaXMuYWN0aXZlTW9kYWwgPSAnJzsKICAgIH0KICB9LAogIGFwb2xsbzogewogICAgZm9sZGVyczogewogICAgICBxdWVyeTogbGlzdEZvbGRlckFzc2V0UXVlcnksCiAgICAgIHZhcmlhYmxlcygpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcGFyZW50Rm9sZGVySWQ6IHRoaXMuY3VycmVudEZvbGRlcklkCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgZmV0Y2hQb2xpY3k6ICduZXR3b3JrLW9ubHknLAogICAgICB1cGRhdGU6IGRhdGEgPT4gZGF0YS5hc3NldHMuZm9sZGVycywKICAgICAgd2F0Y2hMb2FkaW5nKGlzTG9hZGluZykgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgbG9hZGluZyR7aXNMb2FkaW5nID8gJ1N0YXJ0JyA6ICdTdG9wJ31gLCAnZWRpdG9yLW1lZGlhLWZvbGRlcnMtbGlzdC1yZWZyZXNoJyk7CiAgICAgIH0KICAgIH0sCiAgICBhc3NldHM6IHsKICAgICAgcXVlcnk6IGxpc3RBc3NldFF1ZXJ5LAogICAgICB2YXJpYWJsZXMoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGZvbGRlcklkOiB0aGlzLmN1cnJlbnRGb2xkZXJJZCwKICAgICAgICAgIGtpbmQ6ICdBTEwnCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgdGhyb3R0bGU6IDEwMDAsCiAgICAgIGZldGNoUG9saWN5OiAnbmV0d29yay1vbmx5JywKICAgICAgdXBkYXRlOiBkYXRhID0+IGRhdGEuYXNzZXRzLmxpc3QsCiAgICAgIHdhdGNoTG9hZGluZyhpc0xvYWRpbmcpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBpc0xvYWRpbmc7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KGBsb2FkaW5nJHtpc0xvYWRpbmcgPyAnU3RhcnQnIDogJ1N0b3AnfWAsICdlZGl0b3ItbWVkaWEtbGlzdC1yZWZyZXNoJyk7CiAgICAgIH0KICAgIH0KICB9Cn07"},null]}