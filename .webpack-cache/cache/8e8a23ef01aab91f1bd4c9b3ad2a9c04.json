{"remainingRequest":"/home/kantro/WebstormProjects/wikipyconero/node_modules/babel-loader/lib/index.js??ref--0-1!/home/kantro/WebstormProjects/wikipyconero/node_modules/vuetify/lib/components/VSelect/VSelect.js","dependencies":[{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/vuetify/lib/components/VSelect/VSelect.js","mtime":1695231284816},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/cache-loader/dist/cjs.js","mtime":1694896091905},{"path":"/home/kantro/WebstormProjects/wikipyconero/node_modules/babel-loader/lib/index.js","mtime":1694896091857}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8gU3R5bGVzCmltcG9ydCAiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVlRleHRGaWVsZC9WVGV4dEZpZWxkLnNhc3MiOwppbXBvcnQgIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL1ZTZWxlY3QvVlNlbGVjdC5zYXNzIjsgLy8gQ29tcG9uZW50cwoKaW1wb3J0IFZDaGlwIGZyb20gJy4uL1ZDaGlwJzsKaW1wb3J0IFZNZW51IGZyb20gJy4uL1ZNZW51JzsKaW1wb3J0IFZTZWxlY3RMaXN0IGZyb20gJy4vVlNlbGVjdExpc3QnOyAvLyBFeHRlbnNpb25zCgppbXBvcnQgVklucHV0IGZyb20gJy4uL1ZJbnB1dCc7CmltcG9ydCBWVGV4dEZpZWxkIGZyb20gJy4uL1ZUZXh0RmllbGQvVlRleHRGaWVsZCc7IC8vIE1peGlucwoKaW1wb3J0IENvbXBhcmFibGUgZnJvbSAnLi4vLi4vbWl4aW5zL2NvbXBhcmFibGUnOwppbXBvcnQgRGVwZW5kZW50IGZyb20gJy4uLy4uL21peGlucy9kZXBlbmRlbnQnOwppbXBvcnQgRmlsdGVyYWJsZSBmcm9tICcuLi8uLi9taXhpbnMvZmlsdGVyYWJsZSc7IC8vIERpcmVjdGl2ZXMKCmltcG9ydCBDbGlja091dHNpZGUgZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9jbGljay1vdXRzaWRlJzsgLy8gVXRpbGl0aWVzCgppbXBvcnQgbWVyZ2VEYXRhIGZyb20gJy4uLy4uL3V0aWwvbWVyZ2VEYXRhJzsKaW1wb3J0IHsgZ2V0UHJvcGVydHlGcm9tSXRlbSwgZ2V0T2JqZWN0VmFsdWVCeVBhdGgsIGtleUNvZGVzIH0gZnJvbSAnLi4vLi4vdXRpbC9oZWxwZXJzJzsKaW1wb3J0IHsgY29uc29sZUVycm9yIH0gZnJvbSAnLi4vLi4vdXRpbC9jb25zb2xlJzsgLy8gVHlwZXMKCmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vdXRpbC9taXhpbnMnOwpleHBvcnQgY29uc3QgZGVmYXVsdE1lbnVQcm9wcyA9IHsKICBjbG9zZU9uQ2xpY2s6IGZhbHNlLAogIGNsb3NlT25Db250ZW50Q2xpY2s6IGZhbHNlLAogIGRpc2FibGVLZXlzOiB0cnVlLAogIG9wZW5PbkNsaWNrOiBmYWxzZSwKICBtYXhIZWlnaHQ6IDMwNAp9OyAvLyBUeXBlcwoKY29uc3QgYmFzZU1peGlucyA9IG1peGlucyhWVGV4dEZpZWxkLCBDb21wYXJhYmxlLCBEZXBlbmRlbnQsIEZpbHRlcmFibGUpOwovKiBAdnVlL2NvbXBvbmVudCAqLwoKZXhwb3J0IGRlZmF1bHQgYmFzZU1peGlucy5leHRlbmQoKS5leHRlbmQoewogIG5hbWU6ICd2LXNlbGVjdCcsCiAgZGlyZWN0aXZlczogewogICAgQ2xpY2tPdXRzaWRlCiAgfSwKICBwcm9wczogewogICAgYXBwZW5kSWNvbjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICckZHJvcGRvd24nCiAgICB9LAogICAgYXR0YWNoOiB7CiAgICAgIHR5cGU6IG51bGwsCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY2FjaGVJdGVtczogQm9vbGVhbiwKICAgIGNoaXBzOiBCb29sZWFuLAogICAgY2xlYXJhYmxlOiBCb29sZWFuLAogICAgZGVsZXRhYmxlQ2hpcHM6IEJvb2xlYW4sCiAgICBkaXNhYmxlTG9va3VwOiBCb29sZWFuLAogICAgZWFnZXI6IEJvb2xlYW4sCiAgICBoaWRlU2VsZWN0ZWQ6IEJvb2xlYW4sCiAgICBpdGVtczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICBpdGVtQ29sb3I6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAncHJpbWFyeScKICAgIH0sCiAgICBpdGVtRGlzYWJsZWQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgQXJyYXksIEZ1bmN0aW9uXSwKICAgICAgZGVmYXVsdDogJ2Rpc2FibGVkJwogICAgfSwKICAgIGl0ZW1UZXh0OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5LCBGdW5jdGlvbl0sCiAgICAgIGRlZmF1bHQ6ICd0ZXh0JwogICAgfSwKICAgIGl0ZW1WYWx1ZTogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheSwgRnVuY3Rpb25dLAogICAgICBkZWZhdWx0OiAndmFsdWUnCiAgICB9LAogICAgbWVudVByb3BzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5LCBPYmplY3RdLAogICAgICBkZWZhdWx0OiAoKSA9PiBkZWZhdWx0TWVudVByb3BzCiAgICB9LAogICAgbXVsdGlwbGU6IEJvb2xlYW4sCiAgICBvcGVuT25DbGVhcjogQm9vbGVhbiwKICAgIHJldHVybk9iamVjdDogQm9vbGVhbiwKICAgIHNtYWxsQ2hpcHM6IEJvb2xlYW4KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjYWNoZWRJdGVtczogdGhpcy5jYWNoZUl0ZW1zID8gdGhpcy5pdGVtcyA6IFtdLAogICAgICBtZW51SXNCb290ZWQ6IGZhbHNlLAogICAgICBpc01lbnVBY3RpdmU6IGZhbHNlLAogICAgICBsYXN0SXRlbTogMjAsCiAgICAgIC8vIEFzIGxvbmcgYXMgYSB2YWx1ZSBpcyBkZWZpbmVkLCBzaG93IGl0CiAgICAgIC8vIE90aGVyd2lzZSwgY2hlY2sgaWYgbXVsdGlwbGUKICAgICAgLy8gdG8gZGV0ZXJtaW5lIHdoaWNoIGRlZmF1bHQgdG8gcHJvdmlkZQogICAgICBsYXp5VmFsdWU6IHRoaXMudmFsdWUgIT09IHVuZGVmaW5lZCA/IHRoaXMudmFsdWUgOiB0aGlzLm11bHRpcGxlID8gW10gOiB1bmRlZmluZWQsCiAgICAgIHNlbGVjdGVkSW5kZXg6IC0xLAogICAgICBzZWxlY3RlZEl0ZW1zOiBbXSwKICAgICAga2V5Ym9hcmRMb29rdXBQcmVmaXg6ICcnLAogICAgICBrZXlib2FyZExvb2t1cExhc3RUaW1lOiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qIEFsbCBpdGVtcyB0aGF0IHRoZSBzZWxlY3QgaGFzICovCiAgICBhbGxJdGVtcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyRHVwbGljYXRlcyh0aGlzLmNhY2hlZEl0ZW1zLmNvbmNhdCh0aGlzLml0ZW1zKSk7CiAgICB9LAogICAgY2xhc3NlcygpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAuLi5WVGV4dEZpZWxkLm9wdGlvbnMuY29tcHV0ZWQuY2xhc3Nlcy5jYWxsKHRoaXMpLAogICAgICAgICd2LXNlbGVjdCc6IHRydWUsCiAgICAgICAgJ3Ytc2VsZWN0LS1jaGlwcyc6IHRoaXMuaGFzQ2hpcHMsCiAgICAgICAgJ3Ytc2VsZWN0LS1jaGlwcy0tc21hbGwnOiB0aGlzLnNtYWxsQ2hpcHMsCiAgICAgICAgJ3Ytc2VsZWN0LS1pcy1tZW51LWFjdGl2ZSc6IHRoaXMuaXNNZW51QWN0aXZlLAogICAgICAgICd2LXNlbGVjdC0taXMtbXVsdGknOiB0aGlzLm11bHRpcGxlCiAgICAgIH07CiAgICB9LAogICAgLyogVXNlZCBieSBvdGhlciBjb21wb25lbnRzIHRvIG92ZXJ3cml0ZSAqLwogICAgY29tcHV0ZWRJdGVtcygpIHsKICAgICAgcmV0dXJuIHRoaXMuYWxsSXRlbXM7CiAgICB9LAogICAgY29tcHV0ZWRPd25zKCkgewogICAgICByZXR1cm4gYGxpc3QtJHt0aGlzLl91aWR9YDsKICAgIH0sCiAgICBjb21wdXRlZENvdW50ZXJWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgPyB0aGlzLnNlbGVjdGVkSXRlbXMubGVuZ3RoIDogKHRoaXMuZ2V0VGV4dCh0aGlzLnNlbGVjdGVkSXRlbXNbMF0pIHx8ICcnKS50b1N0cmluZygpLmxlbmd0aDsKICAgIH0sCiAgICBkaXJlY3RpdmVzKCkgewogICAgICByZXR1cm4gdGhpcy5pc0ZvY3VzZWQgPyBbewogICAgICAgIG5hbWU6ICdjbGljay1vdXRzaWRlJywKICAgICAgICB2YWx1ZTogewogICAgICAgICAgaGFuZGxlcjogdGhpcy5ibHVyLAogICAgICAgICAgY2xvc2VDb25kaXRpb25hbDogdGhpcy5jbG9zZUNvbmRpdGlvbmFsLAogICAgICAgICAgaW5jbHVkZTogKCkgPT4gdGhpcy5nZXRPcGVuRGVwZW5kZW50RWxlbWVudHMoKQogICAgICAgIH0KICAgICAgfV0gOiB1bmRlZmluZWQ7CiAgICB9LAogICAgZHluYW1pY0hlaWdodCgpIHsKICAgICAgcmV0dXJuICdhdXRvJzsKICAgIH0sCiAgICBoYXNDaGlwcygpIHsKICAgICAgcmV0dXJuIHRoaXMuY2hpcHMgfHwgdGhpcy5zbWFsbENoaXBzOwogICAgfSwKICAgIGhhc1Nsb3QoKSB7CiAgICAgIHJldHVybiBCb29sZWFuKHRoaXMuaGFzQ2hpcHMgfHwgdGhpcy4kc2NvcGVkU2xvdHMuc2VsZWN0aW9uKTsKICAgIH0sCiAgICBpc0RpcnR5KCkgewogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aCA+IDA7CiAgICB9LAogICAgbGlzdERhdGEoKSB7CiAgICAgIGNvbnN0IHNjb3BlSWQgPSB0aGlzLiR2bm9kZSAmJiB0aGlzLiR2bm9kZS5jb250ZXh0LiRvcHRpb25zLl9zY29wZUlkOwogICAgICBjb25zdCBhdHRycyA9IHNjb3BlSWQgPyB7CiAgICAgICAgW3Njb3BlSWRdOiB0cnVlCiAgICAgIH0gOiB7fTsKICAgICAgcmV0dXJuIHsKICAgICAgICBhdHRyczogewogICAgICAgICAgLi4uYXR0cnMsCiAgICAgICAgICBpZDogdGhpcy5jb21wdXRlZE93bnMKICAgICAgICB9LAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBhY3Rpb246IHRoaXMubXVsdGlwbGUsCiAgICAgICAgICBjb2xvcjogdGhpcy5pdGVtQ29sb3IsCiAgICAgICAgICBkZW5zZTogdGhpcy5kZW5zZSwKICAgICAgICAgIGhpZGVTZWxlY3RlZDogdGhpcy5oaWRlU2VsZWN0ZWQsCiAgICAgICAgICBpdGVtczogdGhpcy52aXJ0dWFsaXplZEl0ZW1zLAogICAgICAgICAgaXRlbURpc2FibGVkOiB0aGlzLml0ZW1EaXNhYmxlZCwKICAgICAgICAgIGl0ZW1UZXh0OiB0aGlzLml0ZW1UZXh0LAogICAgICAgICAgaXRlbVZhbHVlOiB0aGlzLml0ZW1WYWx1ZSwKICAgICAgICAgIG5vRGF0YVRleHQ6IHRoaXMuJHZ1ZXRpZnkubGFuZy50KHRoaXMubm9EYXRhVGV4dCksCiAgICAgICAgICBzZWxlY3RlZEl0ZW1zOiB0aGlzLnNlbGVjdGVkSXRlbXMKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBzZWxlY3Q6IHRoaXMuc2VsZWN0SXRlbQogICAgICAgIH0sCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGl0ZW06IHRoaXMuJHNjb3BlZFNsb3RzLml0ZW0KICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgc3RhdGljTGlzdCgpIHsKICAgICAgaWYgKHRoaXMuJHNsb3RzWyduby1kYXRhJ10gfHwgdGhpcy4kc2xvdHNbJ3ByZXBlbmQtaXRlbSddIHx8IHRoaXMuJHNsb3RzWydhcHBlbmQtaXRlbSddKSB7CiAgICAgICAgY29uc29sZUVycm9yKCdhc3NlcnQ6IHN0YXRpY0xpc3Qgc2hvdWxkIG5vdCBiZSBjYWxsZWQgaWYgc2xvdHMgYXJlIHVzZWQnKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChWU2VsZWN0TGlzdCwgdGhpcy5saXN0RGF0YSk7CiAgICB9LAogICAgdmlydHVhbGl6ZWRJdGVtcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJF9tZW51UHJvcHMuYXV0byA/IHRoaXMuY29tcHV0ZWRJdGVtcyA6IHRoaXMuY29tcHV0ZWRJdGVtcy5zbGljZSgwLCB0aGlzLmxhc3RJdGVtKTsKICAgIH0sCiAgICBtZW51Q2FuU2hvdzogKCkgPT4gdHJ1ZSwKICAgICRfbWVudVByb3BzKCkgewogICAgICBsZXQgbm9ybWFsaXNlZFByb3BzID0gdHlwZW9mIHRoaXMubWVudVByb3BzID09PSAnc3RyaW5nJyA/IHRoaXMubWVudVByb3BzLnNwbGl0KCcsJykgOiB0aGlzLm1lbnVQcm9wczsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkobm9ybWFsaXNlZFByb3BzKSkgewogICAgICAgIG5vcm1hbGlzZWRQcm9wcyA9IG5vcm1hbGlzZWRQcm9wcy5yZWR1Y2UoKGFjYywgcCkgPT4gewogICAgICAgICAgYWNjW3AudHJpbSgpXSA9IHRydWU7CiAgICAgICAgICByZXR1cm4gYWNjOwogICAgICAgIH0sIHt9KTsKICAgICAgfQogICAgICByZXR1cm4gewogICAgICAgIC4uLmRlZmF1bHRNZW51UHJvcHMsCiAgICAgICAgZWFnZXI6IHRoaXMuZWFnZXIsCiAgICAgICAgdmFsdWU6IHRoaXMubWVudUNhblNob3cgJiYgdGhpcy5pc01lbnVBY3RpdmUsCiAgICAgICAgbnVkZ2VCb3R0b206IG5vcm1hbGlzZWRQcm9wcy5vZmZzZXRZID8gMSA6IDAsCiAgICAgICAgLi4ubm9ybWFsaXNlZFByb3BzCiAgICAgIH07CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgaW50ZXJuYWxWYWx1ZSh2YWwpIHsKICAgICAgdGhpcy5pbml0aWFsVmFsdWUgPSB2YWw7CiAgICAgIHRoaXMuc2V0U2VsZWN0ZWRJdGVtcygpOwogICAgfSwKICAgIGlzTWVudUFjdGl2ZSh2YWwpIHsKICAgICAgd2luZG93LnNldFRpbWVvdXQoKCkgPT4gdGhpcy5vbk1lbnVBY3RpdmVDaGFuZ2UodmFsKSk7CiAgICB9LAogICAgaXRlbXM6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIGlmICh0aGlzLmNhY2hlSXRlbXMpIHsKICAgICAgICAgIC8vIEJyZWFrcyB2dWUtdGVzdC11dGlscyBpZgogICAgICAgICAgLy8gdGhpcyBpc24ndCBjYWxjdWxhdGVkCiAgICAgICAgICAvLyBvbiB0aGUgbmV4dCB0aWNrCiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuY2FjaGVkSXRlbXMgPSB0aGlzLmZpbHRlckR1cGxpY2F0ZXModGhpcy5jYWNoZWRJdGVtcy5jb25jYXQodmFsKSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEl0ZW1zKCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiBAcHVibGljICovCiAgICBibHVyKGUpIHsKICAgICAgVlRleHRGaWVsZC5vcHRpb25zLm1ldGhvZHMuYmx1ci5jYWxsKHRoaXMsIGUpOwogICAgICB0aGlzLmlzTWVudUFjdGl2ZSA9IGZhbHNlOwogICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlOwogICAgICB0aGlzLnNlbGVjdGVkSW5kZXggPSAtMTsKICAgIH0sCiAgICAvKiogQHB1YmxpYyAqLwogICAgYWN0aXZhdGVNZW51KCkgewogICAgICBpZiAoIXRoaXMuaXNJbnRlcmFjdGl2ZSB8fCB0aGlzLmlzTWVudUFjdGl2ZSkgcmV0dXJuOwogICAgICB0aGlzLmlzTWVudUFjdGl2ZSA9IHRydWU7CiAgICB9LAogICAgY2xlYXJhYmxlQ2FsbGJhY2soKSB7CiAgICAgIHRoaXMuc2V0VmFsdWUodGhpcy5tdWx0aXBsZSA/IFtdIDogdW5kZWZpbmVkKTsKICAgICAgdGhpcy5zZXRNZW51SW5kZXgoLTEpOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLiRyZWZzLmlucHV0ICYmIHRoaXMuJHJlZnMuaW5wdXQuZm9jdXMoKSk7CiAgICAgIGlmICh0aGlzLm9wZW5PbkNsZWFyKSB0aGlzLmlzTWVudUFjdGl2ZSA9IHRydWU7CiAgICB9LAogICAgY2xvc2VDb25kaXRpb25hbChlKSB7CiAgICAgIGlmICghdGhpcy5pc01lbnVBY3RpdmUpIHJldHVybiB0cnVlOwogICAgICByZXR1cm4gIXRoaXMuX2lzRGVzdHJveWVkICYmICgKICAgICAgLy8gQ2xpY2sgb3JpZ2luYXRlcyBmcm9tIG91dHNpZGUgdGhlIG1lbnUgY29udGVudAogICAgICAvLyBNdWx0aXBsZSBzZWxlY3RzIGRvbid0IGNsb3NlIHdoZW4gYW4gaXRlbSBpcyBjbGlja2VkCiAgICAgICF0aGlzLmdldENvbnRlbnQoKSB8fCAhdGhpcy5nZXRDb250ZW50KCkuY29udGFpbnMoZS50YXJnZXQpKSAmJgogICAgICAvLyBDbGljayBvcmlnaW5hdGVzIGZyb20gb3V0c2lkZSB0aGUgZWxlbWVudAogICAgICB0aGlzLiRlbCAmJiAhdGhpcy4kZWwuY29udGFpbnMoZS50YXJnZXQpICYmIGUudGFyZ2V0ICE9PSB0aGlzLiRlbDsKICAgIH0sCiAgICBmaWx0ZXJEdXBsaWNhdGVzKGFycikgewogICAgICBjb25zdCB1bmlxdWVWYWx1ZXMgPSBuZXcgTWFwKCk7CiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBhcnIubGVuZ3RoOyArK2luZGV4KSB7CiAgICAgICAgY29uc3QgaXRlbSA9IGFycltpbmRleF07CiAgICAgICAgY29uc3QgdmFsID0gdGhpcy5nZXRWYWx1ZShpdGVtKTsgLy8gVE9ETzogY29tcGFyYXRvcgoKICAgICAgICAhdW5pcXVlVmFsdWVzLmhhcyh2YWwpICYmIHVuaXF1ZVZhbHVlcy5zZXQodmFsLCBpdGVtKTsKICAgICAgfQogICAgICByZXR1cm4gQXJyYXkuZnJvbSh1bmlxdWVWYWx1ZXMudmFsdWVzKCkpOwogICAgfSwKICAgIGZpbmRFeGlzdGluZ0luZGV4KGl0ZW0pIHsKICAgICAgY29uc3QgaXRlbVZhbHVlID0gdGhpcy5nZXRWYWx1ZShpdGVtKTsKICAgICAgcmV0dXJuICh0aGlzLmludGVybmFsVmFsdWUgfHwgW10pLmZpbmRJbmRleChpID0+IHRoaXMudmFsdWVDb21wYXJhdG9yKHRoaXMuZ2V0VmFsdWUoaSksIGl0ZW1WYWx1ZSkpOwogICAgfSwKICAgIGdldENvbnRlbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLm1lbnUgJiYgdGhpcy4kcmVmcy5tZW51LiRyZWZzLmNvbnRlbnQ7CiAgICB9LAogICAgZ2VuQ2hpcFNlbGVjdGlvbihpdGVtLCBpbmRleCkgewogICAgICBjb25zdCBpc0Rpc2FibGVkID0gIXRoaXMuaXNJbnRlcmFjdGl2ZSB8fCB0aGlzLmdldERpc2FibGVkKGl0ZW0pOwogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChWQ2hpcCwgewogICAgICAgIHN0YXRpY0NsYXNzOiAndi1jaGlwLS1zZWxlY3QnLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICB0YWJpbmRleDogLTEKICAgICAgICB9LAogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBjbG9zZTogdGhpcy5kZWxldGFibGVDaGlwcyAmJiAhaXNEaXNhYmxlZCwKICAgICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICAgICAgaW5wdXRWYWx1ZTogaW5kZXggPT09IHRoaXMuc2VsZWN0ZWRJbmRleCwKICAgICAgICAgIHNtYWxsOiB0aGlzLnNtYWxsQ2hpcHMKICAgICAgICB9LAogICAgICAgIG9uOiB7CiAgICAgICAgICBjbGljazogZSA9PiB7CiAgICAgICAgICAgIGlmIChpc0Rpc2FibGVkKSByZXR1cm47CiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4OwogICAgICAgICAgfSwKICAgICAgICAgICdjbGljazpjbG9zZSc6ICgpID0+IHRoaXMub25DaGlwSW5wdXQoaXRlbSkKICAgICAgICB9LAogICAgICAgIGtleTogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRWYWx1ZShpdGVtKSkKICAgICAgfSwgdGhpcy5nZXRUZXh0KGl0ZW0pKTsKICAgIH0sCiAgICBnZW5Db21tYVNlbGVjdGlvbihpdGVtLCBpbmRleCwgbGFzdCkgewogICAgICBjb25zdCBjb2xvciA9IGluZGV4ID09PSB0aGlzLnNlbGVjdGVkSW5kZXggJiYgdGhpcy5jb21wdXRlZENvbG9yOwogICAgICBjb25zdCBpc0Rpc2FibGVkID0gIXRoaXMuaXNJbnRlcmFjdGl2ZSB8fCB0aGlzLmdldERpc2FibGVkKGl0ZW0pOwogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudCgnZGl2JywgdGhpcy5zZXRUZXh0Q29sb3IoY29sb3IsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3Ytc2VsZWN0X19zZWxlY3Rpb24gdi1zZWxlY3RfX3NlbGVjdGlvbi0tY29tbWEnLAogICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAndi1zZWxlY3RfX3NlbGVjdGlvbi0tZGlzYWJsZWQnOiBpc0Rpc2FibGVkCiAgICAgICAgfSwKICAgICAgICBrZXk6IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0VmFsdWUoaXRlbSkpCiAgICAgIH0pLCBgJHt0aGlzLmdldFRleHQoaXRlbSl9JHtsYXN0ID8gJycgOiAnLCAnfWApOwogICAgfSwKICAgIGdlbkRlZmF1bHRTbG90KCkgewogICAgICBjb25zdCBzZWxlY3Rpb25zID0gdGhpcy5nZW5TZWxlY3Rpb25zKCk7CiAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5nZW5JbnB1dCgpOyAvLyBJZiB0aGUgcmV0dXJuIGlzIGFuIGVtcHR5IGFycmF5CiAgICAgIC8vIHB1c2ggdGhlIGlucHV0CgogICAgICBpZiAoQXJyYXkuaXNBcnJheShzZWxlY3Rpb25zKSkgewogICAgICAgIHNlbGVjdGlvbnMucHVzaChpbnB1dCk7IC8vIE90aGVyd2lzZSBwdXNoIGl0IGludG8gY2hpbGRyZW4KICAgICAgfSBlbHNlIHsKICAgICAgICBzZWxlY3Rpb25zLmNoaWxkcmVuID0gc2VsZWN0aW9ucy5jaGlsZHJlbiB8fCBbXTsKICAgICAgICBzZWxlY3Rpb25zLmNoaWxkcmVuLnB1c2goaW5wdXQpOwogICAgICB9CiAgICAgIHJldHVybiBbdGhpcy5nZW5GaWVsZHNldCgpLCB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LXNlbGVjdF9fc2xvdCcsCiAgICAgICAgZGlyZWN0aXZlczogdGhpcy5kaXJlY3RpdmVzCiAgICAgIH0sIFt0aGlzLmdlbkxhYmVsKCksIHRoaXMucHJlZml4ID8gdGhpcy5nZW5BZmZpeCgncHJlZml4JykgOiBudWxsLCBzZWxlY3Rpb25zLCB0aGlzLnN1ZmZpeCA/IHRoaXMuZ2VuQWZmaXgoJ3N1ZmZpeCcpIDogbnVsbCwgdGhpcy5nZW5DbGVhckljb24oKSwgdGhpcy5nZW5JY29uU2xvdCgpLCB0aGlzLmdlbkhpZGRlbklucHV0KCldKSwgdGhpcy5nZW5NZW51KCksIHRoaXMuZ2VuUHJvZ3Jlc3MoKV07CiAgICB9LAogICAgZ2VuSWNvbih0eXBlLCBjYiwgZXh0cmFEYXRhKSB7CiAgICAgIGNvbnN0IGljb24gPSBWSW5wdXQub3B0aW9ucy5tZXRob2RzLmdlbkljb24uY2FsbCh0aGlzLCB0eXBlLCBjYiwgZXh0cmFEYXRhKTsKICAgICAgaWYgKHR5cGUgPT09ICdhcHBlbmQnKSB7CiAgICAgICAgLy8gRG9uJ3QgYWxsb3cgdGhlIGRyb3Bkb3duIGljb24gdG8gYmUgZm9jdXNlZAogICAgICAgIGljb24uY2hpbGRyZW5bMF0uZGF0YSA9IG1lcmdlRGF0YShpY29uLmNoaWxkcmVuWzBdLmRhdGEsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgIHRhYmluZGV4OiBpY29uLmNoaWxkcmVuWzBdLmNvbXBvbmVudE9wdGlvbnMubGlzdGVuZXJzICYmICctMScsCiAgICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJywKICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiB1bmRlZmluZWQKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gaWNvbjsKICAgIH0sCiAgICBnZW5JbnB1dCgpIHsKICAgICAgY29uc3QgaW5wdXQgPSBWVGV4dEZpZWxkLm9wdGlvbnMubWV0aG9kcy5nZW5JbnB1dC5jYWxsKHRoaXMpOwogICAgICBkZWxldGUgaW5wdXQuZGF0YS5hdHRycy5uYW1lOwogICAgICBpbnB1dC5kYXRhID0gbWVyZ2VEYXRhKGlucHV0LmRhdGEsIHsKICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgdmFsdWU6IG51bGwKICAgICAgICB9LAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICByZWFkb25seTogdHJ1ZSwKICAgICAgICAgIHR5cGU6ICd0ZXh0JywKICAgICAgICAgICdhcmlhLXJlYWRvbmx5JzogU3RyaW5nKHRoaXMuaXNSZWFkb25seSksCiAgICAgICAgICAnYXJpYS1hY3RpdmVkZXNjZW5kYW50JzogZ2V0T2JqZWN0VmFsdWVCeVBhdGgodGhpcy4kcmVmcy5tZW51LCAnYWN0aXZlVGlsZS5pZCcpLAogICAgICAgICAgYXV0b2NvbXBsZXRlOiBnZXRPYmplY3RWYWx1ZUJ5UGF0aChpbnB1dC5kYXRhLCAnYXR0cnMuYXV0b2NvbXBsZXRlJywgJ29mZicpCiAgICAgICAgfSwKICAgICAgICBvbjogewogICAgICAgICAga2V5cHJlc3M6IHRoaXMub25LZXlQcmVzcwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBpbnB1dDsKICAgIH0sCiAgICBnZW5IaWRkZW5JbnB1dCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ2lucHV0JywgewogICAgICAgIGRvbVByb3BzOiB7CiAgICAgICAgICB2YWx1ZTogdGhpcy5sYXp5VmFsdWUKICAgICAgICB9LAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICB0eXBlOiAnaGlkZGVuJywKICAgICAgICAgIG5hbWU6IHRoaXMuYXR0cnMkLm5hbWUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGdlbklucHV0U2xvdCgpIHsKICAgICAgY29uc3QgcmVuZGVyID0gVlRleHRGaWVsZC5vcHRpb25zLm1ldGhvZHMuZ2VuSW5wdXRTbG90LmNhbGwodGhpcyk7CiAgICAgIHJlbmRlci5kYXRhLmF0dHJzID0gewogICAgICAgIC4uLnJlbmRlci5kYXRhLmF0dHJzLAogICAgICAgIHJvbGU6ICdidXR0b24nLAogICAgICAgICdhcmlhLWhhc3BvcHVwJzogJ2xpc3Rib3gnLAogICAgICAgICdhcmlhLWV4cGFuZGVkJzogU3RyaW5nKHRoaXMuaXNNZW51QWN0aXZlKSwKICAgICAgICAnYXJpYS1vd25zJzogdGhpcy5jb21wdXRlZE93bnMKICAgICAgfTsKICAgICAgcmV0dXJuIHJlbmRlcjsKICAgIH0sCiAgICBnZW5MaXN0KCkgewogICAgICAvLyBJZiB0aGVyZSdzIG5vIHNsb3RzLCB3ZSBjYW4gdXNlIGEgY2FjaGVkIFZOb2RlIHRvIGltcHJvdmUgcGVyZm9ybWFuY2UKICAgICAgaWYgKHRoaXMuJHNsb3RzWyduby1kYXRhJ10gfHwgdGhpcy4kc2xvdHNbJ3ByZXBlbmQtaXRlbSddIHx8IHRoaXMuJHNsb3RzWydhcHBlbmQtaXRlbSddKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuTGlzdFdpdGhTbG90KCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGljTGlzdDsKICAgICAgfQogICAgfSwKICAgIGdlbkxpc3RXaXRoU2xvdCgpIHsKICAgICAgY29uc3Qgc2xvdHMgPSBbJ3ByZXBlbmQtaXRlbScsICduby1kYXRhJywgJ2FwcGVuZC1pdGVtJ10uZmlsdGVyKHNsb3ROYW1lID0+IHRoaXMuJHNsb3RzW3Nsb3ROYW1lXSkubWFwKHNsb3ROYW1lID0+IHRoaXMuJGNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJywgewogICAgICAgIHNsb3Q6IHNsb3ROYW1lCiAgICAgIH0sIHRoaXMuJHNsb3RzW3Nsb3ROYW1lXSkpOyAvLyBSZXF1aXJlcyBkZXN0cnVjdHVyaW5nIGR1ZSB0byBWdWUKICAgICAgLy8gbW9kaWZ5aW5nIHRoZSBgb25gIHByb3BlcnR5IHdoZW4gcGFzc2VkCiAgICAgIC8vIGFzIGEgcmVmZXJlbmNlZCBvYmplY3QKCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFZTZWxlY3RMaXN0LCB7CiAgICAgICAgLi4udGhpcy5saXN0RGF0YQogICAgICB9LCBzbG90cyk7CiAgICB9LAogICAgZ2VuTWVudSgpIHsKICAgICAgY29uc3QgcHJvcHMgPSB0aGlzLiRfbWVudVByb3BzOwogICAgICBwcm9wcy5hY3RpdmF0b3IgPSB0aGlzLiRyZWZzWydpbnB1dC1zbG90J107IC8vIEF0dGFjaCB0byByb290IGVsIHNvIHRoYXQKICAgICAgLy8gbWVudSBjb3ZlcnMgcHJlcGVuZC9hcHBlbmQgaWNvbnMKCiAgICAgIGlmICgKICAgICAgLy8gVE9ETzogbWFrZSB0aGlzIGEgY29tcHV0ZWQgcHJvcGVydHkgb3IgaGVscGVyIG9yIHNvbWV0aGluZwogICAgICB0aGlzLmF0dGFjaCA9PT0gJycgfHwKICAgICAgLy8gSWYgdXNlZCBhcyBhIGJvb2xlYW4gcHJvcCAoPHYtbWVudSBhdHRhY2g+KQogICAgICB0aGlzLmF0dGFjaCA9PT0gdHJ1ZSB8fAogICAgICAvLyBJZiBib3VuZCB0byBhIGJvb2xlYW4gKDx2LW1lbnUgOmF0dGFjaD0idHJ1ZSI+KQogICAgICB0aGlzLmF0dGFjaCA9PT0gJ2F0dGFjaCcgLy8gSWYgYm91bmQgYXMgYm9vbGVhbiBwcm9wIGluIHB1ZyAodi1tZW51KGF0dGFjaCkpCiAgICAgICkgewogICAgICAgIHByb3BzLmF0dGFjaCA9IHRoaXMuJGVsOwogICAgICB9IGVsc2UgewogICAgICAgIHByb3BzLmF0dGFjaCA9IHRoaXMuYXR0YWNoOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KFZNZW51LCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHJvbGU6IHVuZGVmaW5lZAogICAgICAgIH0sCiAgICAgICAgcHJvcHMsCiAgICAgICAgb246IHsKICAgICAgICAgIGlucHV0OiB2YWwgPT4gewogICAgICAgICAgICB0aGlzLmlzTWVudUFjdGl2ZSA9IHZhbDsKICAgICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB2YWw7CiAgICAgICAgICB9LAogICAgICAgICAgc2Nyb2xsOiB0aGlzLm9uU2Nyb2xsCiAgICAgICAgfSwKICAgICAgICByZWY6ICdtZW51JwogICAgICB9LCBbdGhpcy5nZW5MaXN0KCldKTsKICAgIH0sCiAgICBnZW5TZWxlY3Rpb25zKCkgewogICAgICBsZXQgbGVuZ3RoID0gdGhpcy5zZWxlY3RlZEl0ZW1zLmxlbmd0aDsKICAgICAgY29uc3QgY2hpbGRyZW4gPSBuZXcgQXJyYXkobGVuZ3RoKTsKICAgICAgbGV0IGdlblNlbGVjdGlvbjsKICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzLnNlbGVjdGlvbikgewogICAgICAgIGdlblNlbGVjdGlvbiA9IHRoaXMuZ2VuU2xvdFNlbGVjdGlvbjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmhhc0NoaXBzKSB7CiAgICAgICAgZ2VuU2VsZWN0aW9uID0gdGhpcy5nZW5DaGlwU2VsZWN0aW9uOwogICAgICB9IGVsc2UgewogICAgICAgIGdlblNlbGVjdGlvbiA9IHRoaXMuZ2VuQ29tbWFTZWxlY3Rpb247CiAgICAgIH0KICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7CiAgICAgICAgY2hpbGRyZW5bbGVuZ3RoXSA9IGdlblNlbGVjdGlvbih0aGlzLnNlbGVjdGVkSXRlbXNbbGVuZ3RoXSwgbGVuZ3RoLCBsZW5ndGggPT09IGNoaWxkcmVuLmxlbmd0aCAtIDEpOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LXNlbGVjdF9fc2VsZWN0aW9ucycKICAgICAgfSwgY2hpbGRyZW4pOwogICAgfSwKICAgIGdlblNsb3RTZWxlY3Rpb24oaXRlbSwgaW5kZXgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHNjb3BlZFNsb3RzLnNlbGVjdGlvbih7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIGNsYXNzOiAndi1jaGlwLS1zZWxlY3QnCiAgICAgICAgfSwKICAgICAgICBwYXJlbnQ6IHRoaXMsCiAgICAgICAgaXRlbSwKICAgICAgICBpbmRleCwKICAgICAgICBzZWxlY3Q6IGUgPT4gewogICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IGluZGV4OwogICAgICAgIH0sCiAgICAgICAgc2VsZWN0ZWQ6IGluZGV4ID09PSB0aGlzLnNlbGVjdGVkSW5kZXgsCiAgICAgICAgZGlzYWJsZWQ6ICF0aGlzLmlzSW50ZXJhY3RpdmUKICAgICAgfSk7CiAgICB9LAogICAgZ2V0TWVudUluZGV4KCkgewogICAgICByZXR1cm4gdGhpcy4kcmVmcy5tZW51ID8gdGhpcy4kcmVmcy5tZW51Lmxpc3RJbmRleCA6IC0xOwogICAgfSwKICAgIGdldERpc2FibGVkKGl0ZW0pIHsKICAgICAgcmV0dXJuIGdldFByb3BlcnR5RnJvbUl0ZW0oaXRlbSwgdGhpcy5pdGVtRGlzYWJsZWQsIGZhbHNlKTsKICAgIH0sCiAgICBnZXRUZXh0KGl0ZW0pIHsKICAgICAgcmV0dXJuIGdldFByb3BlcnR5RnJvbUl0ZW0oaXRlbSwgdGhpcy5pdGVtVGV4dCwgaXRlbSk7CiAgICB9LAogICAgZ2V0VmFsdWUoaXRlbSkgewogICAgICByZXR1cm4gZ2V0UHJvcGVydHlGcm9tSXRlbShpdGVtLCB0aGlzLml0ZW1WYWx1ZSwgdGhpcy5nZXRUZXh0KGl0ZW0pKTsKICAgIH0sCiAgICBvbkJsdXIoZSkgewogICAgICBlICYmIHRoaXMuJGVtaXQoJ2JsdXInLCBlKTsKICAgIH0sCiAgICBvbkNoaXBJbnB1dChpdGVtKSB7CiAgICAgIGlmICh0aGlzLm11bHRpcGxlKSB0aGlzLnNlbGVjdEl0ZW0oaXRlbSk7ZWxzZSB0aGlzLnNldFZhbHVlKG51bGwpOyAvLyBJZiBhbGwgaXRlbXMgaGF2ZSBiZWVuIGRlbGV0ZWQsCiAgICAgIC8vIG9wZW4gYHYtbWVudWAKCiAgICAgIGlmICh0aGlzLnNlbGVjdGVkSXRlbXMubGVuZ3RoID09PSAwKSB7CiAgICAgICAgdGhpcy5pc01lbnVBY3RpdmUgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNNZW51QWN0aXZlID0gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gLTE7CiAgICB9LAogICAgb25DbGljayhlKSB7CiAgICAgIGlmICghdGhpcy5pc0ludGVyYWN0aXZlKSByZXR1cm47CiAgICAgIGlmICghdGhpcy5pc0FwcGVuZElubmVyKGUudGFyZ2V0KSkgewogICAgICAgIHRoaXMuaXNNZW51QWN0aXZlID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuaXNGb2N1c2VkKSB7CiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlOwogICAgICAgIHRoaXMuJGVtaXQoJ2ZvY3VzJyk7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnY2xpY2snLCBlKTsKICAgIH0sCiAgICBvbkVzY0Rvd24oZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGlmICh0aGlzLmlzTWVudUFjdGl2ZSkgewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy5pc01lbnVBY3RpdmUgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIG9uS2V5UHJlc3MoZSkgewogICAgICBpZiAodGhpcy5tdWx0aXBsZSB8fCAhdGhpcy5pc0ludGVyYWN0aXZlIHx8IHRoaXMuZGlzYWJsZUxvb2t1cCkgcmV0dXJuOwogICAgICBjb25zdCBLRVlCT0FSRF9MT09LVVBfVEhSRVNIT0xEID0gMTAwMDsgLy8gbWlsbGlzZWNvbmRzCgogICAgICBjb25zdCBub3cgPSBwZXJmb3JtYW5jZS5ub3coKTsKICAgICAgaWYgKG5vdyAtIHRoaXMua2V5Ym9hcmRMb29rdXBMYXN0VGltZSA+IEtFWUJPQVJEX0xPT0tVUF9USFJFU0hPTEQpIHsKICAgICAgICB0aGlzLmtleWJvYXJkTG9va3VwUHJlZml4ID0gJyc7CiAgICAgIH0KICAgICAgdGhpcy5rZXlib2FyZExvb2t1cFByZWZpeCArPSBlLmtleS50b0xvd2VyQ2FzZSgpOwogICAgICB0aGlzLmtleWJvYXJkTG9va3VwTGFzdFRpbWUgPSBub3c7CiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5hbGxJdGVtcy5maW5kSW5kZXgoaXRlbSA9PiB7CiAgICAgICAgY29uc3QgdGV4dCA9ICh0aGlzLmdldFRleHQoaXRlbSkgfHwgJycpLnRvU3RyaW5nKCk7CiAgICAgICAgcmV0dXJuIHRleHQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHRoaXMua2V5Ym9hcmRMb29rdXBQcmVmaXgpOwogICAgICB9KTsKICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWxsSXRlbXNbaW5kZXhdOwogICAgICBpZiAoaW5kZXggIT09IC0xKSB7CiAgICAgICAgdGhpcy5sYXN0SXRlbSA9IE1hdGgubWF4KHRoaXMubGFzdEl0ZW0sIGluZGV4ICsgNSk7CiAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnJldHVybk9iamVjdCA/IGl0ZW0gOiB0aGlzLmdldFZhbHVlKGl0ZW0pKTsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLiRyZWZzLm1lbnUuZ2V0VGlsZXMoKSk7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnNldE1lbnVJbmRleChpbmRleCkpOwogICAgICB9CiAgICB9LAogICAgb25LZXlEb3duKGUpIHsKICAgICAgaWYgKHRoaXMuaXNSZWFkb25seSAmJiBlLmtleUNvZGUgIT09IGtleUNvZGVzLnRhYikgcmV0dXJuOwogICAgICBjb25zdCBrZXlDb2RlID0gZS5rZXlDb2RlOwogICAgICBjb25zdCBtZW51ID0gdGhpcy4kcmVmcy5tZW51OyAvLyBJZiBlbnRlciwgc3BhY2UsIG9wZW4gbWVudQoKICAgICAgaWYgKFtrZXlDb2Rlcy5lbnRlciwga2V5Q29kZXMuc3BhY2VdLmluY2x1ZGVzKGtleUNvZGUpKSB0aGlzLmFjdGl2YXRlTWVudSgpOwogICAgICB0aGlzLiRlbWl0KCdrZXlkb3duJywgZSk7CiAgICAgIGlmICghbWVudSkgcmV0dXJuOyAvLyBJZiBtZW51IGlzIGFjdGl2ZSwgYWxsb3cgZGVmYXVsdAogICAgICAvLyBsaXN0SW5kZXggY2hhbmdlIGZyb20gbWVudQoKICAgICAgaWYgKHRoaXMuaXNNZW51QWN0aXZlICYmIGtleUNvZGUgIT09IGtleUNvZGVzLnRhYikgewogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIG1lbnUuY2hhbmdlTGlzdEluZGV4KGUpOwogICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlOmxpc3QtaW5kZXgnLCBtZW51Lmxpc3RJbmRleCk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8gSWYgbWVudSBpcyBub3QgYWN0aXZlLCB1cCBhbmQgZG93biBjYW4gZG8KICAgICAgLy8gb25lIG9mIDIgdGhpbmdzLiBJZiBtdWx0aXBsZSwgb3BlbnMgdGhlCiAgICAgIC8vIG1lbnUsIGlmIG5vdCwgd2lsbCBjeWNsZSB0aHJvdWdoIGFsbAogICAgICAvLyBhdmFpbGFibGUgb3B0aW9ucwoKICAgICAgaWYgKCF0aGlzLmlzTWVudUFjdGl2ZSAmJiBba2V5Q29kZXMudXAsIGtleUNvZGVzLmRvd25dLmluY2x1ZGVzKGtleUNvZGUpKSByZXR1cm4gdGhpcy5vblVwRG93bihlKTsgLy8gSWYgZXNjYXBlIGRlYWN0aXZhdGUgdGhlIG1lbnUKCiAgICAgIGlmIChrZXlDb2RlID09PSBrZXlDb2Rlcy5lc2MpIHJldHVybiB0aGlzLm9uRXNjRG93bihlKTsgLy8gSWYgdGFiIC0gc2VsZWN0IGl0ZW0gb3IgY2xvc2UgbWVudQoKICAgICAgaWYgKGtleUNvZGUgPT09IGtleUNvZGVzLnRhYikgcmV0dXJuIHRoaXMub25UYWJEb3duKGUpOyAvLyBJZiBzcGFjZSBwcmV2ZW50RGVmYXVsdAoKICAgICAgaWYgKGtleUNvZGUgPT09IGtleUNvZGVzLnNwYWNlKSByZXR1cm4gdGhpcy5vblNwYWNlRG93bihlKTsKICAgIH0sCiAgICBvbk1lbnVBY3RpdmVDaGFuZ2UodmFsKSB7CiAgICAgIC8vIElmIG1lbnUgaXMgY2xvc2luZyBhbmQgbXVsaXRwbGUKICAgICAgLy8gb3IgbWVudUluZGV4IGlzIGFscmVhZHkgc2V0CiAgICAgIC8vIHNraXAgbWVudSBpbmRleCByZWNhbGN1bGF0aW9uCiAgICAgIGlmICh0aGlzLm11bHRpcGxlICYmICF2YWwgfHwgdGhpcy5nZXRNZW51SW5kZXgoKSA+IC0xKSByZXR1cm47CiAgICAgIGNvbnN0IG1lbnUgPSB0aGlzLiRyZWZzLm1lbnU7CiAgICAgIGlmICghbWVudSB8fCAhdGhpcy5pc0RpcnR5KSByZXR1cm47IC8vIFdoZW4gbWVudSBvcGVucywgc2V0IGluZGV4IG9mIGZpcnN0IGFjdGl2ZSBpdGVtCgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1lbnUudGlsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAobWVudS50aWxlc1tpXS5nZXRBdHRyaWJ1dGUoJ2FyaWEtc2VsZWN0ZWQnKSA9PT0gJ3RydWUnKSB7CiAgICAgICAgICB0aGlzLnNldE1lbnVJbmRleChpKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIG9uTW91c2VVcChlKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBzb25hcmpzL25vLWNvbGxhcHNpYmxlLWlmCiAgICAgIGlmICh0aGlzLmhhc01vdXNlRG93biAmJiBlLndoaWNoICE9PSAzICYmIHRoaXMuaXNJbnRlcmFjdGl2ZSkgewogICAgICAgIC8vIElmIGFwcGVuZCBpbm5lciBpcyBwcmVzZW50CiAgICAgICAgLy8gYW5kIHRoZSB0YXJnZXQgaXMgaXRzZWxmCiAgICAgICAgLy8gb3IgaW5zaWRlLCB0b2dnbGUgbWVudQogICAgICAgIGlmICh0aGlzLmlzQXBwZW5kSW5uZXIoZS50YXJnZXQpKSB7CiAgICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB0aGlzLmlzTWVudUFjdGl2ZSA9ICF0aGlzLmlzTWVudUFjdGl2ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIFZUZXh0RmllbGQub3B0aW9ucy5tZXRob2RzLm9uTW91c2VVcC5jYWxsKHRoaXMsIGUpOwogICAgfSwKICAgIG9uU2Nyb2xsKCkgewogICAgICBpZiAoIXRoaXMuaXNNZW51QWN0aXZlKSB7CiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZ2V0Q29udGVudCgpLnNjcm9sbFRvcCA9IDApOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLmxhc3RJdGVtID4gdGhpcy5jb21wdXRlZEl0ZW1zLmxlbmd0aCkgcmV0dXJuOwogICAgICAgIGNvbnN0IHNob3dNb3JlSXRlbXMgPSB0aGlzLmdldENvbnRlbnQoKS5zY3JvbGxIZWlnaHQgLSAodGhpcy5nZXRDb250ZW50KCkuc2Nyb2xsVG9wICsgdGhpcy5nZXRDb250ZW50KCkuY2xpZW50SGVpZ2h0KSA8IDIwMDsKICAgICAgICBpZiAoc2hvd01vcmVJdGVtcykgewogICAgICAgICAgdGhpcy5sYXN0SXRlbSArPSAyMDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvblNwYWNlRG93bihlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgIH0sCiAgICBvblRhYkRvd24oZSkgewogICAgICBjb25zdCBtZW51ID0gdGhpcy4kcmVmcy5tZW51OwogICAgICBpZiAoIW1lbnUpIHJldHVybjsKICAgICAgY29uc3QgYWN0aXZlVGlsZSA9IG1lbnUuYWN0aXZlVGlsZTsgLy8gQW4gaXRlbSB0aGF0IGlzIHNlbGVjdGVkIGJ5CiAgICAgIC8vIG1lbnUtaW5kZXggc2hvdWxkIHRvZ2dsZWQKCiAgICAgIGlmICghdGhpcy5tdWx0aXBsZSAmJiBhY3RpdmVUaWxlICYmIHRoaXMuaXNNZW51QWN0aXZlKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgYWN0aXZlVGlsZS5jbGljaygpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIElmIHdlIG1ha2UgaXQgaGVyZSwKICAgICAgICAvLyB0aGUgdXNlciBoYXMgbm8gc2VsZWN0ZWQgaW5kZXhlcwogICAgICAgIC8vIGFuZCBpcyBwcm9iYWJseSB0YWJiaW5nIG91dAogICAgICAgIHRoaXMuYmx1cihlKTsKICAgICAgfQogICAgfSwKICAgIG9uVXBEb3duKGUpIHsKICAgICAgY29uc3QgbWVudSA9IHRoaXMuJHJlZnMubWVudTsKICAgICAgaWYgKCFtZW51KSByZXR1cm47CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gTXVsdGlwbGUgc2VsZWN0cyBkbyBub3QgY3ljbGUgdGhlaXIgdmFsdWUKICAgICAgLy8gd2hlbiBwcmVzc2luZyB1cCBvciBkb3duLCBpbnN0ZWFkIGFjdGl2YXRlCiAgICAgIC8vIHRoZSBtZW51CgogICAgICBpZiAodGhpcy5tdWx0aXBsZSkgcmV0dXJuIHRoaXMuYWN0aXZhdGVNZW51KCk7CiAgICAgIGNvbnN0IGtleUNvZGUgPSBlLmtleUNvZGU7IC8vIEN5Y2xlIHRocm91Z2ggYXZhaWxhYmxlIHZhbHVlcyB0byBhY2hpZXZlCiAgICAgIC8vIHNlbGVjdCBuYXRpdmUgYmVoYXZpb3IKCiAgICAgIG1lbnUuaXNCb290ZWQgPSB0cnVlOwogICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsKICAgICAgICBtZW51LmdldFRpbGVzKCk7CiAgICAgICAga2V5Q29kZXMudXAgPT09IGtleUNvZGUgPyBtZW51LnByZXZUaWxlKCkgOiBtZW51Lm5leHRUaWxlKCk7CiAgICAgICAgbWVudS5hY3RpdmVUaWxlICYmIG1lbnUuYWN0aXZlVGlsZS5jbGljaygpOwogICAgICB9KTsKICAgIH0sCiAgICBzZWxlY3RJdGVtKGl0ZW0pIHsKICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSB7CiAgICAgICAgdGhpcy5zZXRWYWx1ZSh0aGlzLnJldHVybk9iamVjdCA/IGl0ZW0gOiB0aGlzLmdldFZhbHVlKGl0ZW0pKTsKICAgICAgICB0aGlzLmlzTWVudUFjdGl2ZSA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGludGVybmFsVmFsdWUgPSAodGhpcy5pbnRlcm5hbFZhbHVlIHx8IFtdKS5zbGljZSgpOwogICAgICAgIGNvbnN0IGkgPSB0aGlzLmZpbmRFeGlzdGluZ0luZGV4KGl0ZW0pOwogICAgICAgIGkgIT09IC0xID8gaW50ZXJuYWxWYWx1ZS5zcGxpY2UoaSwgMSkgOiBpbnRlcm5hbFZhbHVlLnB1c2goaXRlbSk7CiAgICAgICAgdGhpcy5zZXRWYWx1ZShpbnRlcm5hbFZhbHVlLm1hcChpID0+IHsKICAgICAgICAgIHJldHVybiB0aGlzLnJldHVybk9iamVjdCA/IGkgOiB0aGlzLmdldFZhbHVlKGkpOwogICAgICAgIH0pKTsgLy8gV2hlbiBzZWxlY3RpbmcgbXVsdGlwbGUKICAgICAgICAvLyBhZGp1c3QgbWVudSBhZnRlciBlYWNoCiAgICAgICAgLy8gc2VsZWN0aW9uCgogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMubWVudSAmJiB0aGlzLiRyZWZzLm1lbnUudXBkYXRlRGltZW5zaW9ucygpOwogICAgICAgIH0pOyAvLyBXZSBvbmx5IG5lZWQgdG8gcmVzZXQgbGlzdCBpbmRleCBmb3IgbXVsdGlwbGUKICAgICAgICAvLyB0byBrZWVwIGhpZ2hsaWdodCB3aGVuIGFuIGl0ZW0gaXMgdG9nZ2xlZAogICAgICAgIC8vIG9uIGFuZCBvZmYKCiAgICAgICAgaWYgKCF0aGlzLm11bHRpcGxlKSByZXR1cm47CiAgICAgICAgY29uc3QgbGlzdEluZGV4ID0gdGhpcy5nZXRNZW51SW5kZXgoKTsKICAgICAgICB0aGlzLnNldE1lbnVJbmRleCgtMSk7IC8vIFRoZXJlIGlzIG5vIGl0ZW0gdG8gcmUtaGlnaGxpZ2h0CiAgICAgICAgLy8gd2hlbiBzZWxlY3Rpb25zIGFyZSBoaWRkZW4KCiAgICAgICAgaWYgKHRoaXMuaGlkZVNlbGVjdGVkKSByZXR1cm47CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gdGhpcy5zZXRNZW51SW5kZXgobGlzdEluZGV4KSk7CiAgICAgIH0KICAgIH0sCiAgICBzZXRNZW51SW5kZXgoaW5kZXgpIHsKICAgICAgdGhpcy4kcmVmcy5tZW51ICYmICh0aGlzLiRyZWZzLm1lbnUubGlzdEluZGV4ID0gaW5kZXgpOwogICAgfSwKICAgIHNldFNlbGVjdGVkSXRlbXMoKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkSXRlbXMgPSBbXTsKICAgICAgY29uc3QgdmFsdWVzID0gIXRoaXMubXVsdGlwbGUgfHwgIUFycmF5LmlzQXJyYXkodGhpcy5pbnRlcm5hbFZhbHVlKSA/IFt0aGlzLmludGVybmFsVmFsdWVdIDogdGhpcy5pbnRlcm5hbFZhbHVlOwogICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykgewogICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5hbGxJdGVtcy5maW5kSW5kZXgodiA9PiB0aGlzLnZhbHVlQ29tcGFyYXRvcih0aGlzLmdldFZhbHVlKHYpLCB0aGlzLmdldFZhbHVlKHZhbHVlKSkpOwogICAgICAgIGlmIChpbmRleCA+IC0xKSB7CiAgICAgICAgICBzZWxlY3RlZEl0ZW1zLnB1c2godGhpcy5hbGxJdGVtc1tpbmRleF0pOwogICAgICAgIH0KICAgICAgfQogICAgICB0aGlzLnNlbGVjdGVkSXRlbXMgPSBzZWxlY3RlZEl0ZW1zOwogICAgfSwKICAgIHNldFZhbHVlKHZhbHVlKSB7CiAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5pbnRlcm5hbFZhbHVlOwogICAgICB0aGlzLmludGVybmFsVmFsdWUgPSB2YWx1ZTsKICAgICAgdmFsdWUgIT09IG9sZFZhbHVlICYmIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHZhbHVlKTsKICAgIH0sCiAgICBpc0FwcGVuZElubmVyKHRhcmdldCkgewogICAgICAvLyByZXR1cm4gdHJ1ZSBpZiBhcHBlbmQgaW5uZXIgaXMgcHJlc2VudAogICAgICAvLyBhbmQgdGhlIHRhcmdldCBpcyBpdHNlbGYgb3IgaW5zaWRlCiAgICAgIGNvbnN0IGFwcGVuZElubmVyID0gdGhpcy4kcmVmc1snYXBwZW5kLWlubmVyJ107CiAgICAgIHJldHVybiBhcHBlbmRJbm5lciAmJiAoYXBwZW5kSW5uZXIgPT09IHRhcmdldCB8fCBhcHBlbmRJbm5lci5jb250YWlucyh0YXJnZXQpKTsKICAgIH0KICB9Cn0pOw=="},null]}